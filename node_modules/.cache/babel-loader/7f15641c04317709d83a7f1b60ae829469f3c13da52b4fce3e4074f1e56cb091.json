{"ast":null,"code":"import BN from 'bn.js';\nimport hash from 'hash.js';\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\nfunction getDefaultExportFromCjs(x) {\n  return x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\nfunction createCommonjsModule(fn, basedir, module) {\n  return module = {\n    path: basedir,\n    exports: {},\n    require: function require(path, base) {\n      return commonjsRequire(path, base === undefined || base === null ? module.path : base);\n    }\n  }, fn(module, module.exports), module.exports;\n}\nfunction getDefaultExportFromNamespaceIfPresent(n) {\n  return n && Object.prototype.hasOwnProperty.call(n, 'default') ? n['default'] : n;\n}\nfunction getDefaultExportFromNamespaceIfNotNamed(n) {\n  return n && Object.prototype.hasOwnProperty.call(n, 'default') && Object.keys(n).length === 1 ? n['default'] : n;\n}\nfunction getAugmentedNamespace(n) {\n  if (n.__esModule) return n;\n  var a = Object.defineProperty({}, '__esModule', {\n    value: true\n  });\n  Object.keys(n).forEach(function (k) {\n    var d = Object.getOwnPropertyDescriptor(n, k);\n    Object.defineProperty(a, k, d.get ? d : {\n      enumerable: true,\n      get: function get() {\n        return n[k];\n      }\n    });\n  });\n  return a;\n}\nfunction commonjsRequire() {\n  throw new Error('Dynamic requires are not currently supported by @rollup/plugin-commonjs');\n}\nvar minimalisticAssert = assert;\nfunction assert(val, msg) {\n  if (!val) throw new Error(msg || 'Assertion failed');\n}\nassert.equal = function assertEqual(l, r, msg) {\n  if (l != r) throw new Error(msg || 'Assertion failed: ' + l + ' != ' + r);\n};\nvar utils_1 = createCommonjsModule(function (module, exports) {\n  'use strict';\n\n  var utils = exports;\n  function toArray(msg, enc) {\n    if (Array.isArray(msg)) return msg.slice();\n    if (!msg) return [];\n    var res = [];\n    if (typeof msg !== 'string') {\n      for (var i = 0; i < msg.length; i++) res[i] = msg[i] | 0;\n      return res;\n    }\n    if (enc === 'hex') {\n      msg = msg.replace(/[^a-z0-9]+/ig, '');\n      if (msg.length % 2 !== 0) msg = '0' + msg;\n      for (var i = 0; i < msg.length; i += 2) res.push(parseInt(msg[i] + msg[i + 1], 16));\n    } else {\n      for (var i = 0; i < msg.length; i++) {\n        var c = msg.charCodeAt(i);\n        var hi = c >> 8;\n        var lo = c & 0xff;\n        if (hi) res.push(hi, lo);else res.push(lo);\n      }\n    }\n    return res;\n  }\n  utils.toArray = toArray;\n  function zero2(word) {\n    if (word.length === 1) return '0' + word;else return word;\n  }\n  utils.zero2 = zero2;\n  function toHex(msg) {\n    var res = '';\n    for (var i = 0; i < msg.length; i++) res += zero2(msg[i].toString(16));\n    return res;\n  }\n  utils.toHex = toHex;\n  utils.encode = function encode(arr, enc) {\n    if (enc === 'hex') return toHex(arr);else return arr;\n  };\n});\nvar utils_1$1 = createCommonjsModule(function (module, exports) {\n  'use strict';\n\n  var utils = exports;\n  utils.assert = minimalisticAssert;\n  utils.toArray = utils_1.toArray;\n  utils.zero2 = utils_1.zero2;\n  utils.toHex = utils_1.toHex;\n  utils.encode = utils_1.encode;\n\n  // Represent num in a w-NAF form\n  function getNAF(num, w, bits) {\n    var naf = new Array(Math.max(num.bitLength(), bits) + 1);\n    naf.fill(0);\n    var ws = 1 << w + 1;\n    var k = num.clone();\n    for (var i = 0; i < naf.length; i++) {\n      var z;\n      var mod = k.andln(ws - 1);\n      if (k.isOdd()) {\n        if (mod > (ws >> 1) - 1) z = (ws >> 1) - mod;else z = mod;\n        k.isubn(z);\n      } else {\n        z = 0;\n      }\n      naf[i] = z;\n      k.iushrn(1);\n    }\n    return naf;\n  }\n  utils.getNAF = getNAF;\n\n  // Represent k1, k2 in a Joint Sparse Form\n  function getJSF(k1, k2) {\n    var jsf = [[], []];\n    k1 = k1.clone();\n    k2 = k2.clone();\n    var d1 = 0;\n    var d2 = 0;\n    var m8;\n    while (k1.cmpn(-d1) > 0 || k2.cmpn(-d2) > 0) {\n      // First phase\n      var m14 = k1.andln(3) + d1 & 3;\n      var m24 = k2.andln(3) + d2 & 3;\n      if (m14 === 3) m14 = -1;\n      if (m24 === 3) m24 = -1;\n      var u1;\n      if ((m14 & 1) === 0) {\n        u1 = 0;\n      } else {\n        m8 = k1.andln(7) + d1 & 7;\n        if ((m8 === 3 || m8 === 5) && m24 === 2) u1 = -m14;else u1 = m14;\n      }\n      jsf[0].push(u1);\n      var u2;\n      if ((m24 & 1) === 0) {\n        u2 = 0;\n      } else {\n        m8 = k2.andln(7) + d2 & 7;\n        if ((m8 === 3 || m8 === 5) && m14 === 2) u2 = -m24;else u2 = m24;\n      }\n      jsf[1].push(u2);\n\n      // Second phase\n      if (2 * d1 === u1 + 1) d1 = 1 - d1;\n      if (2 * d2 === u2 + 1) d2 = 1 - d2;\n      k1.iushrn(1);\n      k2.iushrn(1);\n    }\n    return jsf;\n  }\n  utils.getJSF = getJSF;\n  function cachedProperty(obj, name, computer) {\n    var key = '_' + name;\n    obj.prototype[name] = function cachedProperty() {\n      return this[key] !== undefined ? this[key] : this[key] = computer.call(this);\n    };\n  }\n  utils.cachedProperty = cachedProperty;\n  function parseBytes(bytes) {\n    return typeof bytes === 'string' ? utils.toArray(bytes, 'hex') : bytes;\n  }\n  utils.parseBytes = parseBytes;\n  function intFromLE(bytes) {\n    return new BN(bytes, 'hex', 'le');\n  }\n  utils.intFromLE = intFromLE;\n});\n'use strict';\nvar getNAF = utils_1$1.getNAF;\nvar getJSF = utils_1$1.getJSF;\nvar assert$1 = utils_1$1.assert;\nfunction BaseCurve(type, conf) {\n  this.type = type;\n  this.p = new BN(conf.p, 16);\n\n  // Use Montgomery, when there is no fast reduction for the prime\n  this.red = conf.prime ? BN.red(conf.prime) : BN.mont(this.p);\n\n  // Useful for many curves\n  this.zero = new BN(0).toRed(this.red);\n  this.one = new BN(1).toRed(this.red);\n  this.two = new BN(2).toRed(this.red);\n\n  // Curve configuration, optional\n  this.n = conf.n && new BN(conf.n, 16);\n  this.g = conf.g && this.pointFromJSON(conf.g, conf.gRed);\n\n  // Temporary arrays\n  this._wnafT1 = new Array(4);\n  this._wnafT2 = new Array(4);\n  this._wnafT3 = new Array(4);\n  this._wnafT4 = new Array(4);\n  this._bitLength = this.n ? this.n.bitLength() : 0;\n\n  // Generalized Greg Maxwell's trick\n  var adjustCount = this.n && this.p.div(this.n);\n  if (!adjustCount || adjustCount.cmpn(100) > 0) {\n    this.redN = null;\n  } else {\n    this._maxwellTrick = true;\n    this.redN = this.n.toRed(this.red);\n  }\n}\nvar base = BaseCurve;\nBaseCurve.prototype.point = function point() {\n  throw new Error('Not implemented');\n};\nBaseCurve.prototype.validate = function validate() {\n  throw new Error('Not implemented');\n};\nBaseCurve.prototype._fixedNafMul = function _fixedNafMul(p, k) {\n  assert$1(p.precomputed);\n  var doubles = p._getDoubles();\n  var naf = getNAF(k, 1, this._bitLength);\n  var I = (1 << doubles.step + 1) - (doubles.step % 2 === 0 ? 2 : 1);\n  I /= 3;\n\n  // Translate into more windowed form\n  var repr = [];\n  var j;\n  var nafW;\n  for (j = 0; j < naf.length; j += doubles.step) {\n    nafW = 0;\n    for (var l = j + doubles.step - 1; l >= j; l--) nafW = (nafW << 1) + naf[l];\n    repr.push(nafW);\n  }\n  var a = this.jpoint(null, null, null);\n  var b = this.jpoint(null, null, null);\n  for (var i = I; i > 0; i--) {\n    for (j = 0; j < repr.length; j++) {\n      nafW = repr[j];\n      if (nafW === i) b = b.mixedAdd(doubles.points[j]);else if (nafW === -i) b = b.mixedAdd(doubles.points[j].neg());\n    }\n    a = a.add(b);\n  }\n  return a.toP();\n};\nBaseCurve.prototype._wnafMul = function _wnafMul(p, k) {\n  var w = 4;\n\n  // Precompute window\n  var nafPoints = p._getNAFPoints(w);\n  w = nafPoints.wnd;\n  var wnd = nafPoints.points;\n\n  // Get NAF form\n  var naf = getNAF(k, w, this._bitLength);\n\n  // Add `this`*(N+1) for every w-NAF index\n  var acc = this.jpoint(null, null, null);\n  for (var i = naf.length - 1; i >= 0; i--) {\n    // Count zeroes\n    for (var l = 0; i >= 0 && naf[i] === 0; i--) l++;\n    if (i >= 0) l++;\n    acc = acc.dblp(l);\n    if (i < 0) break;\n    var z = naf[i];\n    assert$1(z !== 0);\n    if (p.type === 'affine') {\n      // J +- P\n      if (z > 0) acc = acc.mixedAdd(wnd[z - 1 >> 1]);else acc = acc.mixedAdd(wnd[-z - 1 >> 1].neg());\n    } else {\n      // J +- J\n      if (z > 0) acc = acc.add(wnd[z - 1 >> 1]);else acc = acc.add(wnd[-z - 1 >> 1].neg());\n    }\n  }\n  return p.type === 'affine' ? acc.toP() : acc;\n};\nBaseCurve.prototype._wnafMulAdd = function _wnafMulAdd(defW, points, coeffs, len, jacobianResult) {\n  var wndWidth = this._wnafT1;\n  var wnd = this._wnafT2;\n  var naf = this._wnafT3;\n\n  // Fill all arrays\n  var max = 0;\n  var i;\n  var j;\n  var p;\n  for (i = 0; i < len; i++) {\n    p = points[i];\n    var nafPoints = p._getNAFPoints(defW);\n    wndWidth[i] = nafPoints.wnd;\n    wnd[i] = nafPoints.points;\n  }\n\n  // Comb small window NAFs\n  for (i = len - 1; i >= 1; i -= 2) {\n    var a = i - 1;\n    var b = i;\n    if (wndWidth[a] !== 1 || wndWidth[b] !== 1) {\n      naf[a] = getNAF(coeffs[a], wndWidth[a], this._bitLength);\n      naf[b] = getNAF(coeffs[b], wndWidth[b], this._bitLength);\n      max = Math.max(naf[a].length, max);\n      max = Math.max(naf[b].length, max);\n      continue;\n    }\n    var comb = [points[a], /* 1 */\n    null, /* 3 */\n    null, /* 5 */\n    points[b] /* 7 */];\n\n    // Try to avoid Projective points, if possible\n    if (points[a].y.cmp(points[b].y) === 0) {\n      comb[1] = points[a].add(points[b]);\n      comb[2] = points[a].toJ().mixedAdd(points[b].neg());\n    } else if (points[a].y.cmp(points[b].y.redNeg()) === 0) {\n      comb[1] = points[a].toJ().mixedAdd(points[b]);\n      comb[2] = points[a].add(points[b].neg());\n    } else {\n      comb[1] = points[a].toJ().mixedAdd(points[b]);\n      comb[2] = points[a].toJ().mixedAdd(points[b].neg());\n    }\n    var index = [-3, /* -1 -1 */\n    -1, /* -1 0 */\n    -5, /* -1 1 */\n    -7, /* 0 -1 */\n    0, /* 0 0 */\n    7, /* 0 1 */\n    5, /* 1 -1 */\n    1, /* 1 0 */\n    3 /* 1 1 */];\n\n    var jsf = getJSF(coeffs[a], coeffs[b]);\n    max = Math.max(jsf[0].length, max);\n    naf[a] = new Array(max);\n    naf[b] = new Array(max);\n    for (j = 0; j < max; j++) {\n      var ja = jsf[0][j] | 0;\n      var jb = jsf[1][j] | 0;\n      naf[a][j] = index[(ja + 1) * 3 + (jb + 1)];\n      naf[b][j] = 0;\n      wnd[a] = comb;\n    }\n  }\n  var acc = this.jpoint(null, null, null);\n  var tmp = this._wnafT4;\n  for (i = max; i >= 0; i--) {\n    var k = 0;\n    while (i >= 0) {\n      var zero = true;\n      for (j = 0; j < len; j++) {\n        tmp[j] = naf[j][i] | 0;\n        if (tmp[j] !== 0) zero = false;\n      }\n      if (!zero) break;\n      k++;\n      i--;\n    }\n    if (i >= 0) k++;\n    acc = acc.dblp(k);\n    if (i < 0) break;\n    for (j = 0; j < len; j++) {\n      var z = tmp[j];\n      p;\n      if (z === 0) continue;else if (z > 0) p = wnd[j][z - 1 >> 1];else if (z < 0) p = wnd[j][-z - 1 >> 1].neg();\n      if (p.type === 'affine') acc = acc.mixedAdd(p);else acc = acc.add(p);\n    }\n  }\n  // Zeroify references\n  for (i = 0; i < len; i++) wnd[i] = null;\n  if (jacobianResult) return acc;else return acc.toP();\n};\nfunction BasePoint(curve, type) {\n  this.curve = curve;\n  this.type = type;\n  this.precomputed = null;\n}\nBaseCurve.BasePoint = BasePoint;\nBasePoint.prototype.eq = function eq( /*other*/\n) {\n  throw new Error('Not implemented');\n};\nBasePoint.prototype.validate = function validate() {\n  return this.curve.validate(this);\n};\nBaseCurve.prototype.decodePoint = function decodePoint(bytes, enc) {\n  bytes = utils_1$1.toArray(bytes, enc);\n  var len = this.p.byteLength();\n\n  // uncompressed, hybrid-odd, hybrid-even\n  if ((bytes[0] === 0x04 || bytes[0] === 0x06 || bytes[0] === 0x07) && bytes.length - 1 === 2 * len) {\n    if (bytes[0] === 0x06) assert$1(bytes[bytes.length - 1] % 2 === 0);else if (bytes[0] === 0x07) assert$1(bytes[bytes.length - 1] % 2 === 1);\n    var res = this.point(bytes.slice(1, 1 + len), bytes.slice(1 + len, 1 + 2 * len));\n    return res;\n  } else if ((bytes[0] === 0x02 || bytes[0] === 0x03) && bytes.length - 1 === len) {\n    return this.pointFromX(bytes.slice(1, 1 + len), bytes[0] === 0x03);\n  }\n  throw new Error('Unknown point format');\n};\nBasePoint.prototype.encodeCompressed = function encodeCompressed(enc) {\n  return this.encode(enc, true);\n};\nBasePoint.prototype._encode = function _encode(compact) {\n  var len = this.curve.p.byteLength();\n  var x = this.getX().toArray('be', len);\n  if (compact) return [this.getY().isEven() ? 0x02 : 0x03].concat(x);\n  return [0x04].concat(x, this.getY().toArray('be', len));\n};\nBasePoint.prototype.encode = function encode(enc, compact) {\n  return utils_1$1.encode(this._encode(compact), enc);\n};\nBasePoint.prototype.precompute = function precompute(power) {\n  if (this.precomputed) return this;\n  var precomputed = {\n    doubles: null,\n    naf: null,\n    beta: null\n  };\n  precomputed.naf = this._getNAFPoints(8);\n  precomputed.doubles = this._getDoubles(4, power);\n  precomputed.beta = this._getBeta();\n  this.precomputed = precomputed;\n  return this;\n};\nBasePoint.prototype._hasDoubles = function _hasDoubles(k) {\n  if (!this.precomputed) return false;\n  var doubles = this.precomputed.doubles;\n  if (!doubles) return false;\n  return doubles.points.length >= Math.ceil((k.bitLength() + 1) / doubles.step);\n};\nBasePoint.prototype._getDoubles = function _getDoubles(step, power) {\n  if (this.precomputed && this.precomputed.doubles) return this.precomputed.doubles;\n  var doubles = [this];\n  var acc = this;\n  for (var i = 0; i < power; i += step) {\n    for (var j = 0; j < step; j++) acc = acc.dbl();\n    doubles.push(acc);\n  }\n  return {\n    step: step,\n    points: doubles\n  };\n};\nBasePoint.prototype._getNAFPoints = function _getNAFPoints(wnd) {\n  if (this.precomputed && this.precomputed.naf) return this.precomputed.naf;\n  var res = [this];\n  var max = (1 << wnd) - 1;\n  var dbl = max === 1 ? null : this.dbl();\n  for (var i = 1; i < max; i++) res[i] = res[i - 1].add(dbl);\n  return {\n    wnd: wnd,\n    points: res\n  };\n};\nBasePoint.prototype._getBeta = function _getBeta() {\n  return null;\n};\nBasePoint.prototype.dblp = function dblp(k) {\n  var r = this;\n  for (var i = 0; i < k; i++) r = r.dbl();\n  return r;\n};\nvar inherits_browser = createCommonjsModule(function (module) {\n  if (typeof Object.create === 'function') {\n    // implementation from standard node.js 'util' module\n    module.exports = function inherits(ctor, superCtor) {\n      if (superCtor) {\n        ctor.super_ = superCtor;\n        ctor.prototype = Object.create(superCtor.prototype, {\n          constructor: {\n            value: ctor,\n            enumerable: false,\n            writable: true,\n            configurable: true\n          }\n        });\n      }\n    };\n  } else {\n    // old school shim for old browsers\n    module.exports = function inherits(ctor, superCtor) {\n      if (superCtor) {\n        ctor.super_ = superCtor;\n        var TempCtor = function TempCtor() {};\n        TempCtor.prototype = superCtor.prototype;\n        ctor.prototype = new TempCtor();\n        ctor.prototype.constructor = ctor;\n      }\n    };\n  }\n});\n'use strict';\nvar assert$2 = utils_1$1.assert;\nfunction ShortCurve(conf) {\n  base.call(this, 'short', conf);\n  this.a = new BN(conf.a, 16).toRed(this.red);\n  this.b = new BN(conf.b, 16).toRed(this.red);\n  this.tinv = this.two.redInvm();\n  this.zeroA = this.a.fromRed().cmpn(0) === 0;\n  this.threeA = this.a.fromRed().sub(this.p).cmpn(-3) === 0;\n\n  // If the curve is endomorphic, precalculate beta and lambda\n  this.endo = this._getEndomorphism(conf);\n  this._endoWnafT1 = new Array(4);\n  this._endoWnafT2 = new Array(4);\n}\ninherits_browser(ShortCurve, base);\nvar short_1 = ShortCurve;\nShortCurve.prototype._getEndomorphism = function _getEndomorphism(conf) {\n  // No efficient endomorphism\n  if (!this.zeroA || !this.g || !this.n || this.p.modn(3) !== 1) return;\n\n  // Compute beta and lambda, that lambda * P = (beta * Px; Py)\n  var beta;\n  var lambda;\n  if (conf.beta) {\n    beta = new BN(conf.beta, 16).toRed(this.red);\n  } else {\n    var betas = this._getEndoRoots(this.p);\n    // Choose the smallest beta\n    beta = betas[0].cmp(betas[1]) < 0 ? betas[0] : betas[1];\n    beta = beta.toRed(this.red);\n  }\n  if (conf.lambda) {\n    lambda = new BN(conf.lambda, 16);\n  } else {\n    // Choose the lambda that is matching selected beta\n    var lambdas = this._getEndoRoots(this.n);\n    if (this.g.mul(lambdas[0]).x.cmp(this.g.x.redMul(beta)) === 0) {\n      lambda = lambdas[0];\n    } else {\n      lambda = lambdas[1];\n      assert$2(this.g.mul(lambda).x.cmp(this.g.x.redMul(beta)) === 0);\n    }\n  }\n\n  // Get basis vectors, used for balanced length-two representation\n  var basis;\n  if (conf.basis) {\n    basis = conf.basis.map(function (vec) {\n      return {\n        a: new BN(vec.a, 16),\n        b: new BN(vec.b, 16)\n      };\n    });\n  } else {\n    basis = this._getEndoBasis(lambda);\n  }\n  return {\n    beta: beta,\n    lambda: lambda,\n    basis: basis\n  };\n};\nShortCurve.prototype._getEndoRoots = function _getEndoRoots(num) {\n  // Find roots of for x^2 + x + 1 in F\n  // Root = (-1 +- Sqrt(-3)) / 2\n  //\n  var red = num === this.p ? this.red : BN.mont(num);\n  var tinv = new BN(2).toRed(red).redInvm();\n  var ntinv = tinv.redNeg();\n  var s = new BN(3).toRed(red).redNeg().redSqrt().redMul(tinv);\n  var l1 = ntinv.redAdd(s).fromRed();\n  var l2 = ntinv.redSub(s).fromRed();\n  return [l1, l2];\n};\nShortCurve.prototype._getEndoBasis = function _getEndoBasis(lambda) {\n  // aprxSqrt >= sqrt(this.n)\n  var aprxSqrt = this.n.ushrn(Math.floor(this.n.bitLength() / 2));\n\n  // 3.74\n  // Run EGCD, until r(L + 1) < aprxSqrt\n  var u = lambda;\n  var v = this.n.clone();\n  var x1 = new BN(1);\n  var y1 = new BN(0);\n  var x2 = new BN(0);\n  var y2 = new BN(1);\n\n  // NOTE: all vectors are roots of: a + b * lambda = 0 (mod n)\n  var a0;\n  var b0;\n  // First vector\n  var a1;\n  var b1;\n  // Second vector\n  var a2;\n  var b2;\n  var prevR;\n  var i = 0;\n  var r;\n  var x;\n  while (u.cmpn(0) !== 0) {\n    var q = v.div(u);\n    r = v.sub(q.mul(u));\n    x = x2.sub(q.mul(x1));\n    var y = y2.sub(q.mul(y1));\n    if (!a1 && r.cmp(aprxSqrt) < 0) {\n      a0 = prevR.neg();\n      b0 = x1;\n      a1 = r.neg();\n      b1 = x;\n    } else if (a1 && ++i === 2) {\n      break;\n    }\n    prevR = r;\n    v = u;\n    u = r;\n    x2 = x1;\n    x1 = x;\n    y2 = y1;\n    y1 = y;\n  }\n  a2 = r.neg();\n  b2 = x;\n  var len1 = a1.sqr().add(b1.sqr());\n  var len2 = a2.sqr().add(b2.sqr());\n  if (len2.cmp(len1) >= 0) {\n    a2 = a0;\n    b2 = b0;\n  }\n\n  // Normalize signs\n  if (a1.negative) {\n    a1 = a1.neg();\n    b1 = b1.neg();\n  }\n  if (a2.negative) {\n    a2 = a2.neg();\n    b2 = b2.neg();\n  }\n  return [{\n    a: a1,\n    b: b1\n  }, {\n    a: a2,\n    b: b2\n  }];\n};\nShortCurve.prototype._endoSplit = function _endoSplit(k) {\n  var basis = this.endo.basis;\n  var v1 = basis[0];\n  var v2 = basis[1];\n  var c1 = v2.b.mul(k).divRound(this.n);\n  var c2 = v1.b.neg().mul(k).divRound(this.n);\n  var p1 = c1.mul(v1.a);\n  var p2 = c2.mul(v2.a);\n  var q1 = c1.mul(v1.b);\n  var q2 = c2.mul(v2.b);\n\n  // Calculate answer\n  var k1 = k.sub(p1).sub(p2);\n  var k2 = q1.add(q2).neg();\n  return {\n    k1: k1,\n    k2: k2\n  };\n};\nShortCurve.prototype.pointFromX = function pointFromX(x, odd) {\n  x = new BN(x, 16);\n  if (!x.red) x = x.toRed(this.red);\n  var y2 = x.redSqr().redMul(x).redIAdd(x.redMul(this.a)).redIAdd(this.b);\n  var y = y2.redSqrt();\n  if (y.redSqr().redSub(y2).cmp(this.zero) !== 0) throw new Error('invalid point');\n\n  // XXX Is there any way to tell if the number is odd without converting it\n  // to non-red form?\n  var isOdd = y.fromRed().isOdd();\n  if (odd && !isOdd || !odd && isOdd) y = y.redNeg();\n  return this.point(x, y);\n};\nShortCurve.prototype.validate = function validate(point) {\n  if (point.inf) return true;\n  var x = point.x;\n  var y = point.y;\n  var ax = this.a.redMul(x);\n  var rhs = x.redSqr().redMul(x).redIAdd(ax).redIAdd(this.b);\n  return y.redSqr().redISub(rhs).cmpn(0) === 0;\n};\nShortCurve.prototype._endoWnafMulAdd = function _endoWnafMulAdd(points, coeffs, jacobianResult) {\n  var npoints = this._endoWnafT1;\n  var ncoeffs = this._endoWnafT2;\n  for (var i = 0; i < points.length; i++) {\n    var split = this._endoSplit(coeffs[i]);\n    var p = points[i];\n    var beta = p._getBeta();\n    if (split.k1.negative) {\n      split.k1.ineg();\n      p = p.neg(true);\n    }\n    if (split.k2.negative) {\n      split.k2.ineg();\n      beta = beta.neg(true);\n    }\n    npoints[i * 2] = p;\n    npoints[i * 2 + 1] = beta;\n    ncoeffs[i * 2] = split.k1;\n    ncoeffs[i * 2 + 1] = split.k2;\n  }\n  var res = this._wnafMulAdd(1, npoints, ncoeffs, i * 2, jacobianResult);\n\n  // Clean-up references to points and coefficients\n  for (var j = 0; j < i * 2; j++) {\n    npoints[j] = null;\n    ncoeffs[j] = null;\n  }\n  return res;\n};\nfunction Point(curve, x, y, isRed) {\n  base.BasePoint.call(this, curve, 'affine');\n  if (x === null && y === null) {\n    this.x = null;\n    this.y = null;\n    this.inf = true;\n  } else {\n    this.x = new BN(x, 16);\n    this.y = new BN(y, 16);\n    // Force redgomery representation when loading from JSON\n    if (isRed) {\n      this.x.forceRed(this.curve.red);\n      this.y.forceRed(this.curve.red);\n    }\n    if (!this.x.red) this.x = this.x.toRed(this.curve.red);\n    if (!this.y.red) this.y = this.y.toRed(this.curve.red);\n    this.inf = false;\n  }\n}\ninherits_browser(Point, base.BasePoint);\nShortCurve.prototype.point = function point(x, y, isRed) {\n  return new Point(this, x, y, isRed);\n};\nShortCurve.prototype.pointFromJSON = function pointFromJSON(obj, red) {\n  return Point.fromJSON(this, obj, red);\n};\nPoint.prototype._getBeta = function _getBeta() {\n  if (!this.curve.endo) return;\n  var pre = this.precomputed;\n  if (pre && pre.beta) return pre.beta;\n  var beta = this.curve.point(this.x.redMul(this.curve.endo.beta), this.y);\n  if (pre) {\n    var curve = this.curve;\n    var endoMul = function endoMul(p) {\n      return curve.point(p.x.redMul(curve.endo.beta), p.y);\n    };\n    pre.beta = beta;\n    beta.precomputed = {\n      beta: null,\n      naf: pre.naf && {\n        wnd: pre.naf.wnd,\n        points: pre.naf.points.map(endoMul)\n      },\n      doubles: pre.doubles && {\n        step: pre.doubles.step,\n        points: pre.doubles.points.map(endoMul)\n      }\n    };\n  }\n  return beta;\n};\nPoint.prototype.toJSON = function toJSON() {\n  if (!this.precomputed) return [this.x, this.y];\n  return [this.x, this.y, this.precomputed && {\n    doubles: this.precomputed.doubles && {\n      step: this.precomputed.doubles.step,\n      points: this.precomputed.doubles.points.slice(1)\n    },\n    naf: this.precomputed.naf && {\n      wnd: this.precomputed.naf.wnd,\n      points: this.precomputed.naf.points.slice(1)\n    }\n  }];\n};\nPoint.fromJSON = function fromJSON(curve, obj, red) {\n  if (typeof obj === 'string') obj = JSON.parse(obj);\n  var res = curve.point(obj[0], obj[1], red);\n  if (!obj[2]) return res;\n  function obj2point(obj) {\n    return curve.point(obj[0], obj[1], red);\n  }\n  var pre = obj[2];\n  res.precomputed = {\n    beta: null,\n    doubles: pre.doubles && {\n      step: pre.doubles.step,\n      points: [res].concat(pre.doubles.points.map(obj2point))\n    },\n    naf: pre.naf && {\n      wnd: pre.naf.wnd,\n      points: [res].concat(pre.naf.points.map(obj2point))\n    }\n  };\n  return res;\n};\nPoint.prototype.inspect = function inspect() {\n  if (this.isInfinity()) return '<EC Point Infinity>';\n  return '<EC Point x: ' + this.x.fromRed().toString(16, 2) + ' y: ' + this.y.fromRed().toString(16, 2) + '>';\n};\nPoint.prototype.isInfinity = function isInfinity() {\n  return this.inf;\n};\nPoint.prototype.add = function add(p) {\n  // O + P = P\n  if (this.inf) return p;\n\n  // P + O = P\n  if (p.inf) return this;\n\n  // P + P = 2P\n  if (this.eq(p)) return this.dbl();\n\n  // P + (-P) = O\n  if (this.neg().eq(p)) return this.curve.point(null, null);\n\n  // P + Q = O\n  if (this.x.cmp(p.x) === 0) return this.curve.point(null, null);\n  var c = this.y.redSub(p.y);\n  if (c.cmpn(0) !== 0) c = c.redMul(this.x.redSub(p.x).redInvm());\n  var nx = c.redSqr().redISub(this.x).redISub(p.x);\n  var ny = c.redMul(this.x.redSub(nx)).redISub(this.y);\n  return this.curve.point(nx, ny);\n};\nPoint.prototype.dbl = function dbl() {\n  if (this.inf) return this;\n\n  // 2P = O\n  var ys1 = this.y.redAdd(this.y);\n  if (ys1.cmpn(0) === 0) return this.curve.point(null, null);\n  var a = this.curve.a;\n  var x2 = this.x.redSqr();\n  var dyinv = ys1.redInvm();\n  var c = x2.redAdd(x2).redIAdd(x2).redIAdd(a).redMul(dyinv);\n  var nx = c.redSqr().redISub(this.x.redAdd(this.x));\n  var ny = c.redMul(this.x.redSub(nx)).redISub(this.y);\n  return this.curve.point(nx, ny);\n};\nPoint.prototype.getX = function getX() {\n  return this.x.fromRed();\n};\nPoint.prototype.getY = function getY() {\n  return this.y.fromRed();\n};\nPoint.prototype.mul = function mul(k) {\n  k = new BN(k, 16);\n  if (this.isInfinity()) return this;else if (this._hasDoubles(k)) return this.curve._fixedNafMul(this, k);else if (this.curve.endo) return this.curve._endoWnafMulAdd([this], [k]);else return this.curve._wnafMul(this, k);\n};\nPoint.prototype.mulAdd = function mulAdd(k1, p2, k2) {\n  var points = [this, p2];\n  var coeffs = [k1, k2];\n  if (this.curve.endo) return this.curve._endoWnafMulAdd(points, coeffs);else return this.curve._wnafMulAdd(1, points, coeffs, 2);\n};\nPoint.prototype.jmulAdd = function jmulAdd(k1, p2, k2) {\n  var points = [this, p2];\n  var coeffs = [k1, k2];\n  if (this.curve.endo) return this.curve._endoWnafMulAdd(points, coeffs, true);else return this.curve._wnafMulAdd(1, points, coeffs, 2, true);\n};\nPoint.prototype.eq = function eq(p) {\n  return this === p || this.inf === p.inf && (this.inf || this.x.cmp(p.x) === 0 && this.y.cmp(p.y) === 0);\n};\nPoint.prototype.neg = function neg(_precompute) {\n  if (this.inf) return this;\n  var res = this.curve.point(this.x, this.y.redNeg());\n  if (_precompute && this.precomputed) {\n    var pre = this.precomputed;\n    var negate = function negate(p) {\n      return p.neg();\n    };\n    res.precomputed = {\n      naf: pre.naf && {\n        wnd: pre.naf.wnd,\n        points: pre.naf.points.map(negate)\n      },\n      doubles: pre.doubles && {\n        step: pre.doubles.step,\n        points: pre.doubles.points.map(negate)\n      }\n    };\n  }\n  return res;\n};\nPoint.prototype.toJ = function toJ() {\n  if (this.inf) return this.curve.jpoint(null, null, null);\n  var res = this.curve.jpoint(this.x, this.y, this.curve.one);\n  return res;\n};\nfunction JPoint(curve, x, y, z) {\n  base.BasePoint.call(this, curve, 'jacobian');\n  if (x === null && y === null && z === null) {\n    this.x = this.curve.one;\n    this.y = this.curve.one;\n    this.z = new BN(0);\n  } else {\n    this.x = new BN(x, 16);\n    this.y = new BN(y, 16);\n    this.z = new BN(z, 16);\n  }\n  if (!this.x.red) this.x = this.x.toRed(this.curve.red);\n  if (!this.y.red) this.y = this.y.toRed(this.curve.red);\n  if (!this.z.red) this.z = this.z.toRed(this.curve.red);\n  this.zOne = this.z === this.curve.one;\n}\ninherits_browser(JPoint, base.BasePoint);\nShortCurve.prototype.jpoint = function jpoint(x, y, z) {\n  return new JPoint(this, x, y, z);\n};\nJPoint.prototype.toP = function toP() {\n  if (this.isInfinity()) return this.curve.point(null, null);\n  var zinv = this.z.redInvm();\n  var zinv2 = zinv.redSqr();\n  var ax = this.x.redMul(zinv2);\n  var ay = this.y.redMul(zinv2).redMul(zinv);\n  return this.curve.point(ax, ay);\n};\nJPoint.prototype.neg = function neg() {\n  return this.curve.jpoint(this.x, this.y.redNeg(), this.z);\n};\nJPoint.prototype.add = function add(p) {\n  // O + P = P\n  if (this.isInfinity()) return p;\n\n  // P + O = P\n  if (p.isInfinity()) return this;\n\n  // 12M + 4S + 7A\n  var pz2 = p.z.redSqr();\n  var z2 = this.z.redSqr();\n  var u1 = this.x.redMul(pz2);\n  var u2 = p.x.redMul(z2);\n  var s1 = this.y.redMul(pz2.redMul(p.z));\n  var s2 = p.y.redMul(z2.redMul(this.z));\n  var h = u1.redSub(u2);\n  var r = s1.redSub(s2);\n  if (h.cmpn(0) === 0) {\n    if (r.cmpn(0) !== 0) return this.curve.jpoint(null, null, null);else return this.dbl();\n  }\n  var h2 = h.redSqr();\n  var h3 = h2.redMul(h);\n  var v = u1.redMul(h2);\n  var nx = r.redSqr().redIAdd(h3).redISub(v).redISub(v);\n  var ny = r.redMul(v.redISub(nx)).redISub(s1.redMul(h3));\n  var nz = this.z.redMul(p.z).redMul(h);\n  return this.curve.jpoint(nx, ny, nz);\n};\nJPoint.prototype.mixedAdd = function mixedAdd(p) {\n  // O + P = P\n  if (this.isInfinity()) return p.toJ();\n\n  // P + O = P\n  if (p.isInfinity()) return this;\n\n  // 8M + 3S + 7A\n  var z2 = this.z.redSqr();\n  var u1 = this.x;\n  var u2 = p.x.redMul(z2);\n  var s1 = this.y;\n  var s2 = p.y.redMul(z2).redMul(this.z);\n  var h = u1.redSub(u2);\n  var r = s1.redSub(s2);\n  if (h.cmpn(0) === 0) {\n    if (r.cmpn(0) !== 0) return this.curve.jpoint(null, null, null);else return this.dbl();\n  }\n  var h2 = h.redSqr();\n  var h3 = h2.redMul(h);\n  var v = u1.redMul(h2);\n  var nx = r.redSqr().redIAdd(h3).redISub(v).redISub(v);\n  var ny = r.redMul(v.redISub(nx)).redISub(s1.redMul(h3));\n  var nz = this.z.redMul(h);\n  return this.curve.jpoint(nx, ny, nz);\n};\nJPoint.prototype.dblp = function dblp(pow) {\n  if (pow === 0) return this;\n  if (this.isInfinity()) return this;\n  if (!pow) return this.dbl();\n  var i;\n  if (this.curve.zeroA || this.curve.threeA) {\n    var r = this;\n    for (i = 0; i < pow; i++) r = r.dbl();\n    return r;\n  }\n\n  // 1M + 2S + 1A + N * (4S + 5M + 8A)\n  // N = 1 => 6M + 6S + 9A\n  var a = this.curve.a;\n  var tinv = this.curve.tinv;\n  var jx = this.x;\n  var jy = this.y;\n  var jz = this.z;\n  var jz4 = jz.redSqr().redSqr();\n\n  // Reuse results\n  var jyd = jy.redAdd(jy);\n  for (i = 0; i < pow; i++) {\n    var jx2 = jx.redSqr();\n    var jyd2 = jyd.redSqr();\n    var jyd4 = jyd2.redSqr();\n    var c = jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4));\n    var t1 = jx.redMul(jyd2);\n    var nx = c.redSqr().redISub(t1.redAdd(t1));\n    var t2 = t1.redISub(nx);\n    var dny = c.redMul(t2);\n    dny = dny.redIAdd(dny).redISub(jyd4);\n    var nz = jyd.redMul(jz);\n    if (i + 1 < pow) jz4 = jz4.redMul(jyd4);\n    jx = nx;\n    jz = nz;\n    jyd = dny;\n  }\n  return this.curve.jpoint(jx, jyd.redMul(tinv), jz);\n};\nJPoint.prototype.dbl = function dbl() {\n  if (this.isInfinity()) return this;\n  if (this.curve.zeroA) return this._zeroDbl();else if (this.curve.threeA) return this._threeDbl();else return this._dbl();\n};\nJPoint.prototype._zeroDbl = function _zeroDbl() {\n  var nx;\n  var ny;\n  var nz;\n  // Z = 1\n  if (this.zOne) {\n    // hyperelliptic.org/EFD/g1p/auto-shortw-jacobian-0.html\n    //     #doubling-mdbl-2007-bl\n    // 1M + 5S + 14A\n\n    // XX = X1^2\n    var xx = this.x.redSqr();\n    // YY = Y1^2\n    var yy = this.y.redSqr();\n    // YYYY = YY^2\n    var yyyy = yy.redSqr();\n    // S = 2 * ((X1 + YY)^2 - XX - YYYY)\n    var s = this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);\n    s = s.redIAdd(s);\n    // M = 3 * XX + a; a = 0\n    var m = xx.redAdd(xx).redIAdd(xx);\n    // T = M ^ 2 - 2*S\n    var t = m.redSqr().redISub(s).redISub(s);\n\n    // 8 * YYYY\n    var yyyy8 = yyyy.redIAdd(yyyy);\n    yyyy8 = yyyy8.redIAdd(yyyy8);\n    yyyy8 = yyyy8.redIAdd(yyyy8);\n\n    // X3 = T\n    nx = t;\n    // Y3 = M * (S - T) - 8 * YYYY\n    ny = m.redMul(s.redISub(t)).redISub(yyyy8);\n    // Z3 = 2*Y1\n    nz = this.y.redAdd(this.y);\n  } else {\n    // hyperelliptic.org/EFD/g1p/auto-shortw-jacobian-0.html\n    //     #doubling-dbl-2009-l\n    // 2M + 5S + 13A\n\n    // A = X1^2\n    var a = this.x.redSqr();\n    // B = Y1^2\n    var b = this.y.redSqr();\n    // C = B^2\n    var c = b.redSqr();\n    // D = 2 * ((X1 + B)^2 - A - C)\n    var d = this.x.redAdd(b).redSqr().redISub(a).redISub(c);\n    d = d.redIAdd(d);\n    // E = 3 * A\n    var e = a.redAdd(a).redIAdd(a);\n    // F = E^2\n    var f = e.redSqr();\n\n    // 8 * C\n    var c8 = c.redIAdd(c);\n    c8 = c8.redIAdd(c8);\n    c8 = c8.redIAdd(c8);\n\n    // X3 = F - 2 * D\n    nx = f.redISub(d).redISub(d);\n    // Y3 = E * (D - X3) - 8 * C\n    ny = e.redMul(d.redISub(nx)).redISub(c8);\n    // Z3 = 2 * Y1 * Z1\n    nz = this.y.redMul(this.z);\n    nz = nz.redIAdd(nz);\n  }\n  return this.curve.jpoint(nx, ny, nz);\n};\nJPoint.prototype._threeDbl = function _threeDbl() {\n  var nx;\n  var ny;\n  var nz;\n  // Z = 1\n  if (this.zOne) {\n    // hyperelliptic.org/EFD/g1p/auto-shortw-jacobian-3.html\n    //     #doubling-mdbl-2007-bl\n    // 1M + 5S + 15A\n\n    // XX = X1^2\n    var xx = this.x.redSqr();\n    // YY = Y1^2\n    var yy = this.y.redSqr();\n    // YYYY = YY^2\n    var yyyy = yy.redSqr();\n    // S = 2 * ((X1 + YY)^2 - XX - YYYY)\n    var s = this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);\n    s = s.redIAdd(s);\n    // M = 3 * XX + a\n    var m = xx.redAdd(xx).redIAdd(xx).redIAdd(this.curve.a);\n    // T = M^2 - 2 * S\n    var t = m.redSqr().redISub(s).redISub(s);\n    // X3 = T\n    nx = t;\n    // Y3 = M * (S - T) - 8 * YYYY\n    var yyyy8 = yyyy.redIAdd(yyyy);\n    yyyy8 = yyyy8.redIAdd(yyyy8);\n    yyyy8 = yyyy8.redIAdd(yyyy8);\n    ny = m.redMul(s.redISub(t)).redISub(yyyy8);\n    // Z3 = 2 * Y1\n    nz = this.y.redAdd(this.y);\n  } else {\n    // hyperelliptic.org/EFD/g1p/auto-shortw-jacobian-3.html#doubling-dbl-2001-b\n    // 3M + 5S\n\n    // delta = Z1^2\n    var delta = this.z.redSqr();\n    // gamma = Y1^2\n    var gamma = this.y.redSqr();\n    // beta = X1 * gamma\n    var beta = this.x.redMul(gamma);\n    // alpha = 3 * (X1 - delta) * (X1 + delta)\n    var alpha = this.x.redSub(delta).redMul(this.x.redAdd(delta));\n    alpha = alpha.redAdd(alpha).redIAdd(alpha);\n    // X3 = alpha^2 - 8 * beta\n    var beta4 = beta.redIAdd(beta);\n    beta4 = beta4.redIAdd(beta4);\n    var beta8 = beta4.redAdd(beta4);\n    nx = alpha.redSqr().redISub(beta8);\n    // Z3 = (Y1 + Z1)^2 - gamma - delta\n    nz = this.y.redAdd(this.z).redSqr().redISub(gamma).redISub(delta);\n    // Y3 = alpha * (4 * beta - X3) - 8 * gamma^2\n    var ggamma8 = gamma.redSqr();\n    ggamma8 = ggamma8.redIAdd(ggamma8);\n    ggamma8 = ggamma8.redIAdd(ggamma8);\n    ggamma8 = ggamma8.redIAdd(ggamma8);\n    ny = alpha.redMul(beta4.redISub(nx)).redISub(ggamma8);\n  }\n  return this.curve.jpoint(nx, ny, nz);\n};\nJPoint.prototype._dbl = function _dbl() {\n  var a = this.curve.a;\n\n  // 4M + 6S + 10A\n  var jx = this.x;\n  var jy = this.y;\n  var jz = this.z;\n  var jz4 = jz.redSqr().redSqr();\n  var jx2 = jx.redSqr();\n  var jy2 = jy.redSqr();\n  var c = jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4));\n  var jxd4 = jx.redAdd(jx);\n  jxd4 = jxd4.redIAdd(jxd4);\n  var t1 = jxd4.redMul(jy2);\n  var nx = c.redSqr().redISub(t1.redAdd(t1));\n  var t2 = t1.redISub(nx);\n  var jyd8 = jy2.redSqr();\n  jyd8 = jyd8.redIAdd(jyd8);\n  jyd8 = jyd8.redIAdd(jyd8);\n  jyd8 = jyd8.redIAdd(jyd8);\n  var ny = c.redMul(t2).redISub(jyd8);\n  var nz = jy.redAdd(jy).redMul(jz);\n  return this.curve.jpoint(nx, ny, nz);\n};\nJPoint.prototype.trpl = function trpl() {\n  if (!this.curve.zeroA) return this.dbl().add(this);\n\n  // hyperelliptic.org/EFD/g1p/auto-shortw-jacobian-0.html#tripling-tpl-2007-bl\n  // 5M + 10S + ...\n\n  // XX = X1^2\n  var xx = this.x.redSqr();\n  // YY = Y1^2\n  var yy = this.y.redSqr();\n  // ZZ = Z1^2\n  var zz = this.z.redSqr();\n  // YYYY = YY^2\n  var yyyy = yy.redSqr();\n  // M = 3 * XX + a * ZZ2; a = 0\n  var m = xx.redAdd(xx).redIAdd(xx);\n  // MM = M^2\n  var mm = m.redSqr();\n  // E = 6 * ((X1 + YY)^2 - XX - YYYY) - MM\n  var e = this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);\n  e = e.redIAdd(e);\n  e = e.redAdd(e).redIAdd(e);\n  e = e.redISub(mm);\n  // EE = E^2\n  var ee = e.redSqr();\n  // T = 16*YYYY\n  var t = yyyy.redIAdd(yyyy);\n  t = t.redIAdd(t);\n  t = t.redIAdd(t);\n  t = t.redIAdd(t);\n  // U = (M + E)^2 - MM - EE - T\n  var u = m.redIAdd(e).redSqr().redISub(mm).redISub(ee).redISub(t);\n  // X3 = 4 * (X1 * EE - 4 * YY * U)\n  var yyu4 = yy.redMul(u);\n  yyu4 = yyu4.redIAdd(yyu4);\n  yyu4 = yyu4.redIAdd(yyu4);\n  var nx = this.x.redMul(ee).redISub(yyu4);\n  nx = nx.redIAdd(nx);\n  nx = nx.redIAdd(nx);\n  // Y3 = 8 * Y1 * (U * (T - U) - E * EE)\n  var ny = this.y.redMul(u.redMul(t.redISub(u)).redISub(e.redMul(ee)));\n  ny = ny.redIAdd(ny);\n  ny = ny.redIAdd(ny);\n  ny = ny.redIAdd(ny);\n  // Z3 = (Z1 + E)^2 - ZZ - EE\n  var nz = this.z.redAdd(e).redSqr().redISub(zz).redISub(ee);\n  return this.curve.jpoint(nx, ny, nz);\n};\nJPoint.prototype.mul = function mul(k, kbase) {\n  k = new BN(k, kbase);\n  return this.curve._wnafMul(this, k);\n};\nJPoint.prototype.eq = function eq(p) {\n  if (p.type === 'affine') return this.eq(p.toJ());\n  if (this === p) return true;\n\n  // x1 * z2^2 == x2 * z1^2\n  var z2 = this.z.redSqr();\n  var pz2 = p.z.redSqr();\n  if (this.x.redMul(pz2).redISub(p.x.redMul(z2)).cmpn(0) !== 0) return false;\n\n  // y1 * z2^3 == y2 * z1^3\n  var z3 = z2.redMul(this.z);\n  var pz3 = pz2.redMul(p.z);\n  return this.y.redMul(pz3).redISub(p.y.redMul(z3)).cmpn(0) === 0;\n};\nJPoint.prototype.eqXToP = function eqXToP(x) {\n  var zs = this.z.redSqr();\n  var rx = x.toRed(this.curve.red).redMul(zs);\n  if (this.x.cmp(rx) === 0) return true;\n  var xc = x.clone();\n  var t = this.curve.redN.redMul(zs);\n  for (;;) {\n    xc.iadd(this.curve.n);\n    if (xc.cmp(this.curve.p) >= 0) return false;\n    rx.redIAdd(t);\n    if (this.x.cmp(rx) === 0) return true;\n  }\n};\nJPoint.prototype.inspect = function inspect() {\n  if (this.isInfinity()) return '<EC JPoint Infinity>';\n  return '<EC JPoint x: ' + this.x.toString(16, 2) + ' y: ' + this.y.toString(16, 2) + ' z: ' + this.z.toString(16, 2) + '>';\n};\nJPoint.prototype.isInfinity = function isInfinity() {\n  // XXX This code assumes that zero is always zero in red\n  return this.z.cmpn(0) === 0;\n};\nvar curve_1 = createCommonjsModule(function (module, exports) {\n  'use strict';\n\n  var curve = exports;\n  curve.base = base;\n  curve.short = short_1;\n  curve.mont = /*RicMoo:ethers:require(./mont)*/null;\n  curve.edwards = /*RicMoo:ethers:require(./edwards)*/null;\n});\nvar curves_1 = createCommonjsModule(function (module, exports) {\n  'use strict';\n\n  var curves = exports;\n  var assert = utils_1$1.assert;\n  function PresetCurve(options) {\n    if (options.type === 'short') this.curve = new curve_1.short(options);else if (options.type === 'edwards') this.curve = new curve_1.edwards(options);else this.curve = new curve_1.mont(options);\n    this.g = this.curve.g;\n    this.n = this.curve.n;\n    this.hash = options.hash;\n    assert(this.g.validate(), 'Invalid curve');\n    assert(this.g.mul(this.n).isInfinity(), 'Invalid curve, G*N != O');\n  }\n  curves.PresetCurve = PresetCurve;\n  function defineCurve(name, options) {\n    Object.defineProperty(curves, name, {\n      configurable: true,\n      enumerable: true,\n      get: function get() {\n        var curve = new PresetCurve(options);\n        Object.defineProperty(curves, name, {\n          configurable: true,\n          enumerable: true,\n          value: curve\n        });\n        return curve;\n      }\n    });\n  }\n  defineCurve('p192', {\n    type: 'short',\n    prime: 'p192',\n    p: 'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff',\n    a: 'ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc',\n    b: '64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1',\n    n: 'ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831',\n    hash: hash.sha256,\n    gRed: false,\n    g: ['188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012', '07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811']\n  });\n  defineCurve('p224', {\n    type: 'short',\n    prime: 'p224',\n    p: 'ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001',\n    a: 'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe',\n    b: 'b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4',\n    n: 'ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d',\n    hash: hash.sha256,\n    gRed: false,\n    g: ['b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21', 'bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34']\n  });\n  defineCurve('p256', {\n    type: 'short',\n    prime: null,\n    p: 'ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff',\n    a: 'ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc',\n    b: '5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b',\n    n: 'ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551',\n    hash: hash.sha256,\n    gRed: false,\n    g: ['6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296', '4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5']\n  });\n  defineCurve('p384', {\n    type: 'short',\n    prime: null,\n    p: 'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ' + 'fffffffe ffffffff 00000000 00000000 ffffffff',\n    a: 'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ' + 'fffffffe ffffffff 00000000 00000000 fffffffc',\n    b: 'b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f ' + '5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef',\n    n: 'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 ' + 'f4372ddf 581a0db2 48b0a77a ecec196a ccc52973',\n    hash: hash.sha384,\n    gRed: false,\n    g: ['aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 ' + '5502f25d bf55296c 3a545e38 72760ab7', '3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 ' + '0a60b1ce 1d7e819d 7a431d7c 90ea0e5f']\n  });\n  defineCurve('p521', {\n    type: 'short',\n    prime: null,\n    p: '000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ' + 'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ' + 'ffffffff ffffffff ffffffff ffffffff ffffffff',\n    a: '000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ' + 'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ' + 'ffffffff ffffffff ffffffff ffffffff fffffffc',\n    b: '00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b ' + '99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd ' + '3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00',\n    n: '000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ' + 'ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 ' + 'f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409',\n    hash: hash.sha512,\n    gRed: false,\n    g: ['000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 ' + '053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 ' + 'a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66', '00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 ' + '579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 ' + '3fad0761 353c7086 a272c240 88be9476 9fd16650']\n  });\n  defineCurve('curve25519', {\n    type: 'mont',\n    prime: 'p25519',\n    p: '7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed',\n    a: '76d06',\n    b: '1',\n    n: '1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed',\n    hash: hash.sha256,\n    gRed: false,\n    g: ['9']\n  });\n  defineCurve('ed25519', {\n    type: 'edwards',\n    prime: 'p25519',\n    p: '7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed',\n    a: '-1',\n    c: '1',\n    // -121665 * (121666^(-1)) (mod P)\n    d: '52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3',\n    n: '1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed',\n    hash: hash.sha256,\n    gRed: false,\n    g: ['216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a',\n    // 4/5\n    '6666666666666666666666666666666666666666666666666666666666666658']\n  });\n  var pre;\n  try {\n    pre = /*RicMoo:ethers:require(./precomputed/secp256k1)*/null.crash();\n  } catch (e) {\n    pre = undefined;\n  }\n  defineCurve('secp256k1', {\n    type: 'short',\n    prime: 'k256',\n    p: 'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f',\n    a: '0',\n    b: '7',\n    n: 'ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141',\n    h: '1',\n    hash: hash.sha256,\n    // Precomputed endomorphism\n    beta: '7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee',\n    lambda: '5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72',\n    basis: [{\n      a: '3086d221a7d46bcde86c90e49284eb15',\n      b: '-e4437ed6010e88286f547fa90abfe4c3'\n    }, {\n      a: '114ca50f7a8e2f3f657c1108d9d44cfd8',\n      b: '3086d221a7d46bcde86c90e49284eb15'\n    }],\n    gRed: false,\n    g: ['79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798', '483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8', pre]\n  });\n});\n'use strict';\nfunction HmacDRBG(options) {\n  if (!(this instanceof HmacDRBG)) return new HmacDRBG(options);\n  this.hash = options.hash;\n  this.predResist = !!options.predResist;\n  this.outLen = this.hash.outSize;\n  this.minEntropy = options.minEntropy || this.hash.hmacStrength;\n  this._reseed = null;\n  this.reseedInterval = null;\n  this.K = null;\n  this.V = null;\n  var entropy = utils_1.toArray(options.entropy, options.entropyEnc || 'hex');\n  var nonce = utils_1.toArray(options.nonce, options.nonceEnc || 'hex');\n  var pers = utils_1.toArray(options.pers, options.persEnc || 'hex');\n  minimalisticAssert(entropy.length >= this.minEntropy / 8, 'Not enough entropy. Minimum is: ' + this.minEntropy + ' bits');\n  this._init(entropy, nonce, pers);\n}\nvar hmacDrbg = HmacDRBG;\nHmacDRBG.prototype._init = function init(entropy, nonce, pers) {\n  var seed = entropy.concat(nonce).concat(pers);\n  this.K = new Array(this.outLen / 8);\n  this.V = new Array(this.outLen / 8);\n  for (var i = 0; i < this.V.length; i++) {\n    this.K[i] = 0x00;\n    this.V[i] = 0x01;\n  }\n  this._update(seed);\n  this._reseed = 1;\n  this.reseedInterval = 0x1000000000000; // 2^48\n};\n\nHmacDRBG.prototype._hmac = function hmac() {\n  return new hash.hmac(this.hash, this.K);\n};\nHmacDRBG.prototype._update = function update(seed) {\n  var kmac = this._hmac().update(this.V).update([0x00]);\n  if (seed) kmac = kmac.update(seed);\n  this.K = kmac.digest();\n  this.V = this._hmac().update(this.V).digest();\n  if (!seed) return;\n  this.K = this._hmac().update(this.V).update([0x01]).update(seed).digest();\n  this.V = this._hmac().update(this.V).digest();\n};\nHmacDRBG.prototype.reseed = function reseed(entropy, entropyEnc, add, addEnc) {\n  // Optional entropy enc\n  if (typeof entropyEnc !== 'string') {\n    addEnc = add;\n    add = entropyEnc;\n    entropyEnc = null;\n  }\n  entropy = utils_1.toArray(entropy, entropyEnc);\n  add = utils_1.toArray(add, addEnc);\n  minimalisticAssert(entropy.length >= this.minEntropy / 8, 'Not enough entropy. Minimum is: ' + this.minEntropy + ' bits');\n  this._update(entropy.concat(add || []));\n  this._reseed = 1;\n};\nHmacDRBG.prototype.generate = function generate(len, enc, add, addEnc) {\n  if (this._reseed > this.reseedInterval) throw new Error('Reseed is required');\n\n  // Optional encoding\n  if (typeof enc !== 'string') {\n    addEnc = add;\n    add = enc;\n    enc = null;\n  }\n\n  // Optional additional data\n  if (add) {\n    add = utils_1.toArray(add, addEnc || 'hex');\n    this._update(add);\n  }\n  var temp = [];\n  while (temp.length < len) {\n    this.V = this._hmac().update(this.V).digest();\n    temp = temp.concat(this.V);\n  }\n  var res = temp.slice(0, len);\n  this._update(add);\n  this._reseed++;\n  return utils_1.encode(res, enc);\n};\n'use strict';\nvar assert$3 = utils_1$1.assert;\nfunction KeyPair(ec, options) {\n  this.ec = ec;\n  this.priv = null;\n  this.pub = null;\n\n  // KeyPair(ec, { priv: ..., pub: ... })\n  if (options.priv) this._importPrivate(options.priv, options.privEnc);\n  if (options.pub) this._importPublic(options.pub, options.pubEnc);\n}\nvar key = KeyPair;\nKeyPair.fromPublic = function fromPublic(ec, pub, enc) {\n  if (pub instanceof KeyPair) return pub;\n  return new KeyPair(ec, {\n    pub: pub,\n    pubEnc: enc\n  });\n};\nKeyPair.fromPrivate = function fromPrivate(ec, priv, enc) {\n  if (priv instanceof KeyPair) return priv;\n  return new KeyPair(ec, {\n    priv: priv,\n    privEnc: enc\n  });\n};\nKeyPair.prototype.validate = function validate() {\n  var pub = this.getPublic();\n  if (pub.isInfinity()) return {\n    result: false,\n    reason: 'Invalid public key'\n  };\n  if (!pub.validate()) return {\n    result: false,\n    reason: 'Public key is not a point'\n  };\n  if (!pub.mul(this.ec.curve.n).isInfinity()) return {\n    result: false,\n    reason: 'Public key * N != O'\n  };\n  return {\n    result: true,\n    reason: null\n  };\n};\nKeyPair.prototype.getPublic = function getPublic(compact, enc) {\n  // compact is optional argument\n  if (typeof compact === 'string') {\n    enc = compact;\n    compact = null;\n  }\n  if (!this.pub) this.pub = this.ec.g.mul(this.priv);\n  if (!enc) return this.pub;\n  return this.pub.encode(enc, compact);\n};\nKeyPair.prototype.getPrivate = function getPrivate(enc) {\n  if (enc === 'hex') return this.priv.toString(16, 2);else return this.priv;\n};\nKeyPair.prototype._importPrivate = function _importPrivate(key, enc) {\n  this.priv = new BN(key, enc || 16);\n\n  // Ensure that the priv won't be bigger than n, otherwise we may fail\n  // in fixed multiplication method\n  this.priv = this.priv.umod(this.ec.curve.n);\n};\nKeyPair.prototype._importPublic = function _importPublic(key, enc) {\n  if (key.x || key.y) {\n    // Montgomery points only have an `x` coordinate.\n    // Weierstrass/Edwards points on the other hand have both `x` and\n    // `y` coordinates.\n    if (this.ec.curve.type === 'mont') {\n      assert$3(key.x, 'Need x coordinate');\n    } else if (this.ec.curve.type === 'short' || this.ec.curve.type === 'edwards') {\n      assert$3(key.x && key.y, 'Need both x and y coordinate');\n    }\n    this.pub = this.ec.curve.point(key.x, key.y);\n    return;\n  }\n  this.pub = this.ec.curve.decodePoint(key, enc);\n};\n\n// ECDH\nKeyPair.prototype.derive = function derive(pub) {\n  if (!pub.validate()) {\n    assert$3(pub.validate(), 'public point not validated');\n  }\n  return pub.mul(this.priv).getX();\n};\n\n// ECDSA\nKeyPair.prototype.sign = function sign(msg, enc, options) {\n  return this.ec.sign(msg, this, enc, options);\n};\nKeyPair.prototype.verify = function verify(msg, signature) {\n  return this.ec.verify(msg, signature, this);\n};\nKeyPair.prototype.inspect = function inspect() {\n  return '<Key priv: ' + (this.priv && this.priv.toString(16, 2)) + ' pub: ' + (this.pub && this.pub.inspect()) + ' >';\n};\n'use strict';\nvar assert$4 = utils_1$1.assert;\nfunction Signature(options, enc) {\n  if (options instanceof Signature) return options;\n  if (this._importDER(options, enc)) return;\n  assert$4(options.r && options.s, 'Signature without r or s');\n  this.r = new BN(options.r, 16);\n  this.s = new BN(options.s, 16);\n  if (options.recoveryParam === undefined) this.recoveryParam = null;else this.recoveryParam = options.recoveryParam;\n}\nvar signature = Signature;\nfunction Position() {\n  this.place = 0;\n}\nfunction getLength(buf, p) {\n  var initial = buf[p.place++];\n  if (!(initial & 0x80)) {\n    return initial;\n  }\n  var octetLen = initial & 0xf;\n\n  // Indefinite length or overflow\n  if (octetLen === 0 || octetLen > 4) {\n    return false;\n  }\n  var val = 0;\n  for (var i = 0, off = p.place; i < octetLen; i++, off++) {\n    val <<= 8;\n    val |= buf[off];\n    val >>>= 0;\n  }\n\n  // Leading zeroes\n  if (val <= 0x7f) {\n    return false;\n  }\n  p.place = off;\n  return val;\n}\nfunction rmPadding(buf) {\n  var i = 0;\n  var len = buf.length - 1;\n  while (!buf[i] && !(buf[i + 1] & 0x80) && i < len) {\n    i++;\n  }\n  if (i === 0) {\n    return buf;\n  }\n  return buf.slice(i);\n}\nSignature.prototype._importDER = function _importDER(data, enc) {\n  data = utils_1$1.toArray(data, enc);\n  var p = new Position();\n  if (data[p.place++] !== 0x30) {\n    return false;\n  }\n  var len = getLength(data, p);\n  if (len === false) {\n    return false;\n  }\n  if (len + p.place !== data.length) {\n    return false;\n  }\n  if (data[p.place++] !== 0x02) {\n    return false;\n  }\n  var rlen = getLength(data, p);\n  if (rlen === false) {\n    return false;\n  }\n  var r = data.slice(p.place, rlen + p.place);\n  p.place += rlen;\n  if (data[p.place++] !== 0x02) {\n    return false;\n  }\n  var slen = getLength(data, p);\n  if (slen === false) {\n    return false;\n  }\n  if (data.length !== slen + p.place) {\n    return false;\n  }\n  var s = data.slice(p.place, slen + p.place);\n  if (r[0] === 0) {\n    if (r[1] & 0x80) {\n      r = r.slice(1);\n    } else {\n      // Leading zeroes\n      return false;\n    }\n  }\n  if (s[0] === 0) {\n    if (s[1] & 0x80) {\n      s = s.slice(1);\n    } else {\n      // Leading zeroes\n      return false;\n    }\n  }\n  this.r = new BN(r);\n  this.s = new BN(s);\n  this.recoveryParam = null;\n  return true;\n};\nfunction constructLength(arr, len) {\n  if (len < 0x80) {\n    arr.push(len);\n    return;\n  }\n  var octets = 1 + (Math.log(len) / Math.LN2 >>> 3);\n  arr.push(octets | 0x80);\n  while (--octets) {\n    arr.push(len >>> (octets << 3) & 0xff);\n  }\n  arr.push(len);\n}\nSignature.prototype.toDER = function toDER(enc) {\n  var r = this.r.toArray();\n  var s = this.s.toArray();\n\n  // Pad values\n  if (r[0] & 0x80) r = [0].concat(r);\n  // Pad values\n  if (s[0] & 0x80) s = [0].concat(s);\n  r = rmPadding(r);\n  s = rmPadding(s);\n  while (!s[0] && !(s[1] & 0x80)) {\n    s = s.slice(1);\n  }\n  var arr = [0x02];\n  constructLength(arr, r.length);\n  arr = arr.concat(r);\n  arr.push(0x02);\n  constructLength(arr, s.length);\n  var backHalf = arr.concat(s);\n  var res = [0x30];\n  constructLength(res, backHalf.length);\n  res = res.concat(backHalf);\n  return utils_1$1.encode(res, enc);\n};\n'use strict';\nvar rand = /*RicMoo:ethers:require(brorand)*/function rand() {\n  throw new Error('unsupported');\n};\nvar assert$5 = utils_1$1.assert;\nfunction EC(options) {\n  if (!(this instanceof EC)) return new EC(options);\n\n  // Shortcut `elliptic.ec(curve-name)`\n  if (typeof options === 'string') {\n    assert$5(Object.prototype.hasOwnProperty.call(curves_1, options), 'Unknown curve ' + options);\n    options = curves_1[options];\n  }\n\n  // Shortcut for `elliptic.ec(elliptic.curves.curveName)`\n  if (options instanceof curves_1.PresetCurve) options = {\n    curve: options\n  };\n  this.curve = options.curve.curve;\n  this.n = this.curve.n;\n  this.nh = this.n.ushrn(1);\n  this.g = this.curve.g;\n\n  // Point on curve\n  this.g = options.curve.g;\n  this.g.precompute(options.curve.n.bitLength() + 1);\n\n  // Hash for function for DRBG\n  this.hash = options.hash || options.curve.hash;\n}\nvar ec = EC;\nEC.prototype.keyPair = function keyPair(options) {\n  return new key(this, options);\n};\nEC.prototype.keyFromPrivate = function keyFromPrivate(priv, enc) {\n  return key.fromPrivate(this, priv, enc);\n};\nEC.prototype.keyFromPublic = function keyFromPublic(pub, enc) {\n  return key.fromPublic(this, pub, enc);\n};\nEC.prototype.genKeyPair = function genKeyPair(options) {\n  if (!options) options = {};\n\n  // Instantiate Hmac_DRBG\n  var drbg = new hmacDrbg({\n    hash: this.hash,\n    pers: options.pers,\n    persEnc: options.persEnc || 'utf8',\n    entropy: options.entropy || rand(this.hash.hmacStrength),\n    entropyEnc: options.entropy && options.entropyEnc || 'utf8',\n    nonce: this.n.toArray()\n  });\n  var bytes = this.n.byteLength();\n  var ns2 = this.n.sub(new BN(2));\n  for (;;) {\n    var priv = new BN(drbg.generate(bytes));\n    if (priv.cmp(ns2) > 0) continue;\n    priv.iaddn(1);\n    return this.keyFromPrivate(priv);\n  }\n};\nEC.prototype._truncateToN = function _truncateToN(msg, truncOnly) {\n  var delta = msg.byteLength() * 8 - this.n.bitLength();\n  if (delta > 0) msg = msg.ushrn(delta);\n  if (!truncOnly && msg.cmp(this.n) >= 0) return msg.sub(this.n);else return msg;\n};\nEC.prototype.sign = function sign(msg, key, enc, options) {\n  if (typeof enc === 'object') {\n    options = enc;\n    enc = null;\n  }\n  if (!options) options = {};\n  key = this.keyFromPrivate(key, enc);\n  msg = this._truncateToN(new BN(msg, 16));\n\n  // Zero-extend key to provide enough entropy\n  var bytes = this.n.byteLength();\n  var bkey = key.getPrivate().toArray('be', bytes);\n\n  // Zero-extend nonce to have the same byte size as N\n  var nonce = msg.toArray('be', bytes);\n\n  // Instantiate Hmac_DRBG\n  var drbg = new hmacDrbg({\n    hash: this.hash,\n    entropy: bkey,\n    nonce: nonce,\n    pers: options.pers,\n    persEnc: options.persEnc || 'utf8'\n  });\n\n  // Number of bytes to generate\n  var ns1 = this.n.sub(new BN(1));\n  for (var iter = 0;; iter++) {\n    var k = options.k ? options.k(iter) : new BN(drbg.generate(this.n.byteLength()));\n    k = this._truncateToN(k, true);\n    if (k.cmpn(1) <= 0 || k.cmp(ns1) >= 0) continue;\n    var kp = this.g.mul(k);\n    if (kp.isInfinity()) continue;\n    var kpX = kp.getX();\n    var r = kpX.umod(this.n);\n    if (r.cmpn(0) === 0) continue;\n    var s = k.invm(this.n).mul(r.mul(key.getPrivate()).iadd(msg));\n    s = s.umod(this.n);\n    if (s.cmpn(0) === 0) continue;\n    var recoveryParam = (kp.getY().isOdd() ? 1 : 0) | (kpX.cmp(r) !== 0 ? 2 : 0);\n\n    // Use complement of `s`, if it is > `n / 2`\n    if (options.canonical && s.cmp(this.nh) > 0) {\n      s = this.n.sub(s);\n      recoveryParam ^= 1;\n    }\n    return new signature({\n      r: r,\n      s: s,\n      recoveryParam: recoveryParam\n    });\n  }\n};\nEC.prototype.verify = function verify(msg, signature$1, key, enc) {\n  msg = this._truncateToN(new BN(msg, 16));\n  key = this.keyFromPublic(key, enc);\n  signature$1 = new signature(signature$1, 'hex');\n\n  // Perform primitive values validation\n  var r = signature$1.r;\n  var s = signature$1.s;\n  if (r.cmpn(1) < 0 || r.cmp(this.n) >= 0) return false;\n  if (s.cmpn(1) < 0 || s.cmp(this.n) >= 0) return false;\n\n  // Validate signature\n  var sinv = s.invm(this.n);\n  var u1 = sinv.mul(msg).umod(this.n);\n  var u2 = sinv.mul(r).umod(this.n);\n  var p;\n  if (!this.curve._maxwellTrick) {\n    p = this.g.mulAdd(u1, key.getPublic(), u2);\n    if (p.isInfinity()) return false;\n    return p.getX().umod(this.n).cmp(r) === 0;\n  }\n\n  // NOTE: Greg Maxwell's trick, inspired by:\n  // https://git.io/vad3K\n\n  p = this.g.jmulAdd(u1, key.getPublic(), u2);\n  if (p.isInfinity()) return false;\n\n  // Compare `p.x` of Jacobian point with `r`,\n  // this will do `p.x == r * p.z^2` instead of multiplying `p.x` by the\n  // inverse of `p.z^2`\n  return p.eqXToP(r);\n};\nEC.prototype.recoverPubKey = function (msg, signature$1, j, enc) {\n  assert$5((3 & j) === j, 'The recovery param is more than two bits');\n  signature$1 = new signature(signature$1, enc);\n  var n = this.n;\n  var e = new BN(msg);\n  var r = signature$1.r;\n  var s = signature$1.s;\n\n  // A set LSB signifies that the y-coordinate is odd\n  var isYOdd = j & 1;\n  var isSecondKey = j >> 1;\n  if (r.cmp(this.curve.p.umod(this.curve.n)) >= 0 && isSecondKey) throw new Error('Unable to find sencond key candinate');\n\n  // 1.1. Let x = r + jn.\n  if (isSecondKey) r = this.curve.pointFromX(r.add(this.curve.n), isYOdd);else r = this.curve.pointFromX(r, isYOdd);\n  var rInv = signature$1.r.invm(n);\n  var s1 = n.sub(e).mul(rInv).umod(n);\n  var s2 = s.mul(rInv).umod(n);\n\n  // 1.6.1 Compute Q = r^-1 (sR -  eG)\n  //               Q = r^-1 (sR + -eG)\n  return this.g.mulAdd(s1, r, s2);\n};\nEC.prototype.getKeyRecoveryParam = function (e, signature$1, Q, enc) {\n  signature$1 = new signature(signature$1, enc);\n  if (signature$1.recoveryParam !== null) return signature$1.recoveryParam;\n  for (var i = 0; i < 4; i++) {\n    var Qprime;\n    try {\n      Qprime = this.recoverPubKey(e, signature$1, i);\n    } catch (e) {\n      continue;\n    }\n    if (Qprime.eq(Q)) return i;\n  }\n  throw new Error('Unable to find valid recovery factor');\n};\nvar elliptic_1 = createCommonjsModule(function (module, exports) {\n  'use strict';\n\n  var elliptic = exports;\n  elliptic.version = /*RicMoo:ethers*/{\n    version: \"6.5.4\"\n  }.version;\n  elliptic.utils = utils_1$1;\n  elliptic.rand = /*RicMoo:ethers:require(brorand)*/function () {\n    throw new Error('unsupported');\n  };\n  elliptic.curve = curve_1;\n  elliptic.curves = curves_1;\n\n  // Protocols\n  elliptic.ec = ec;\n  elliptic.eddsa = /*RicMoo:ethers:require(./elliptic/eddsa)*/null;\n});\nvar EC$1 = elliptic_1.ec;\nexport { EC$1 as EC };","map":{"version":3,"names":["BN","hash","commonjsGlobal","globalThis","window","global","self","getDefaultExportFromCjs","x","__esModule","Object","prototype","hasOwnProperty","call","createCommonjsModule","fn","basedir","module","path","exports","require","base","commonjsRequire","undefined","getDefaultExportFromNamespaceIfPresent","n","getDefaultExportFromNamespaceIfNotNamed","keys","length","getAugmentedNamespace","a","defineProperty","value","forEach","k","d","getOwnPropertyDescriptor","get","enumerable","Error","minimalisticAssert","assert","val","msg","equal","assertEqual","l","r","utils_1","utils","toArray","enc","Array","isArray","slice","res","i","replace","push","parseInt","c","charCodeAt","hi","lo","zero2","word","toHex","toString","encode","arr","utils_1$1","getNAF","num","w","bits","naf","Math","max","bitLength","fill","ws","clone","z","mod","andln","isOdd","isubn","iushrn","getJSF","k1","k2","jsf","d1","d2","m8","cmpn","m14","m24","u1","u2","cachedProperty","obj","name","computer","key","parseBytes","bytes","intFromLE","assert$1","BaseCurve","type","conf","p","red","prime","mont","zero","toRed","one","two","g","pointFromJSON","gRed","_wnafT1","_wnafT2","_wnafT3","_wnafT4","_bitLength","adjustCount","div","redN","_maxwellTrick","point","validate","_fixedNafMul","precomputed","doubles","_getDoubles","I","step","repr","j","nafW","jpoint","b","mixedAdd","points","neg","add","toP","_wnafMul","nafPoints","_getNAFPoints","wnd","acc","dblp","_wnafMulAdd","defW","coeffs","len","jacobianResult","wndWidth","comb","y","cmp","toJ","redNeg","index","ja","jb","tmp","BasePoint","curve","eq","decodePoint","byteLength","pointFromX","encodeCompressed","_encode","compact","getX","getY","isEven","concat","precompute","power","beta","_getBeta","_hasDoubles","ceil","dbl","inherits_browser","create","inherits","ctor","superCtor","super_","constructor","writable","configurable","TempCtor","assert$2","ShortCurve","tinv","redInvm","zeroA","fromRed","threeA","sub","endo","_getEndomorphism","_endoWnafT1","_endoWnafT2","short_1","modn","lambda","betas","_getEndoRoots","lambdas","mul","redMul","basis","map","vec","_getEndoBasis","ntinv","s","redSqrt","l1","redAdd","l2","redSub","aprxSqrt","ushrn","floor","u","v","x1","y1","x2","y2","a0","b0","a1","b1","a2","b2","prevR","q","len1","sqr","len2","negative","_endoSplit","v1","v2","c1","divRound","c2","p1","p2","q1","q2","odd","redSqr","redIAdd","inf","ax","rhs","redISub","_endoWnafMulAdd","npoints","ncoeffs","split","ineg","Point","isRed","forceRed","fromJSON","pre","endoMul","toJSON","JSON","parse","obj2point","inspect","isInfinity","nx","ny","ys1","dyinv","mulAdd","jmulAdd","_precompute","negate","JPoint","zOne","zinv","zinv2","ay","pz2","z2","s1","s2","h","h2","h3","nz","pow","jx","jy","jz","jz4","jyd","jx2","jyd2","jyd4","t1","t2","dny","_zeroDbl","_threeDbl","_dbl","xx","yy","yyyy","m","t","yyyy8","e","f","c8","delta","gamma","alpha","beta4","beta8","ggamma8","jy2","jxd4","jyd8","trpl","zz","mm","ee","yyu4","kbase","z3","pz3","eqXToP","zs","rx","xc","iadd","curve_1","short","edwards","curves_1","curves","PresetCurve","options","defineCurve","sha256","sha384","sha512","crash","HmacDRBG","predResist","outLen","outSize","minEntropy","hmacStrength","_reseed","reseedInterval","K","V","entropy","entropyEnc","nonce","nonceEnc","pers","persEnc","_init","hmacDrbg","init","seed","_update","_hmac","hmac","update","kmac","digest","reseed","addEnc","generate","temp","assert$3","KeyPair","ec","priv","pub","_importPrivate","privEnc","_importPublic","pubEnc","fromPublic","fromPrivate","getPublic","result","reason","getPrivate","umod","derive","sign","verify","signature","assert$4","Signature","_importDER","recoveryParam","Position","place","getLength","buf","initial","octetLen","off","rmPadding","data","rlen","slen","constructLength","octets","log","LN2","toDER","backHalf","rand","assert$5","EC","nh","keyPair","keyFromPrivate","keyFromPublic","genKeyPair","drbg","ns2","iaddn","_truncateToN","truncOnly","bkey","ns1","iter","kp","kpX","invm","canonical","signature$1","sinv","recoverPubKey","isYOdd","isSecondKey","rInv","getKeyRecoveryParam","Q","Qprime","elliptic_1","elliptic","version","eddsa","EC$1"],"sources":["D:/temki/grimace/GrimaceSwap/node_modules/ethers/node_modules/@ethersproject/signing-key/lib.esm/elliptic.js"],"sourcesContent":["import BN from 'bn.js';\nimport hash from 'hash.js';\n\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nfunction getDefaultExportFromCjs (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nfunction createCommonjsModule(fn, basedir, module) {\n\treturn module = {\n\t\tpath: basedir,\n\t\texports: {},\n\t\trequire: function (path, base) {\n\t\t\treturn commonjsRequire(path, (base === undefined || base === null) ? module.path : base);\n\t\t}\n\t}, fn(module, module.exports), module.exports;\n}\n\nfunction getDefaultExportFromNamespaceIfPresent (n) {\n\treturn n && Object.prototype.hasOwnProperty.call(n, 'default') ? n['default'] : n;\n}\n\nfunction getDefaultExportFromNamespaceIfNotNamed (n) {\n\treturn n && Object.prototype.hasOwnProperty.call(n, 'default') && Object.keys(n).length === 1 ? n['default'] : n;\n}\n\nfunction getAugmentedNamespace(n) {\n\tif (n.__esModule) return n;\n\tvar a = Object.defineProperty({}, '__esModule', {value: true});\n\tObject.keys(n).forEach(function (k) {\n\t\tvar d = Object.getOwnPropertyDescriptor(n, k);\n\t\tObject.defineProperty(a, k, d.get ? d : {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\treturn n[k];\n\t\t\t}\n\t\t});\n\t});\n\treturn a;\n}\n\nfunction commonjsRequire () {\n\tthrow new Error('Dynamic requires are not currently supported by @rollup/plugin-commonjs');\n}\n\nvar minimalisticAssert = assert;\n\nfunction assert(val, msg) {\n  if (!val)\n    throw new Error(msg || 'Assertion failed');\n}\n\nassert.equal = function assertEqual(l, r, msg) {\n  if (l != r)\n    throw new Error(msg || ('Assertion failed: ' + l + ' != ' + r));\n};\n\nvar utils_1 = createCommonjsModule(function (module, exports) {\n'use strict';\n\nvar utils = exports;\n\nfunction toArray(msg, enc) {\n  if (Array.isArray(msg))\n    return msg.slice();\n  if (!msg)\n    return [];\n  var res = [];\n  if (typeof msg !== 'string') {\n    for (var i = 0; i < msg.length; i++)\n      res[i] = msg[i] | 0;\n    return res;\n  }\n  if (enc === 'hex') {\n    msg = msg.replace(/[^a-z0-9]+/ig, '');\n    if (msg.length % 2 !== 0)\n      msg = '0' + msg;\n    for (var i = 0; i < msg.length; i += 2)\n      res.push(parseInt(msg[i] + msg[i + 1], 16));\n  } else {\n    for (var i = 0; i < msg.length; i++) {\n      var c = msg.charCodeAt(i);\n      var hi = c >> 8;\n      var lo = c & 0xff;\n      if (hi)\n        res.push(hi, lo);\n      else\n        res.push(lo);\n    }\n  }\n  return res;\n}\nutils.toArray = toArray;\n\nfunction zero2(word) {\n  if (word.length === 1)\n    return '0' + word;\n  else\n    return word;\n}\nutils.zero2 = zero2;\n\nfunction toHex(msg) {\n  var res = '';\n  for (var i = 0; i < msg.length; i++)\n    res += zero2(msg[i].toString(16));\n  return res;\n}\nutils.toHex = toHex;\n\nutils.encode = function encode(arr, enc) {\n  if (enc === 'hex')\n    return toHex(arr);\n  else\n    return arr;\n};\n});\n\nvar utils_1$1 = createCommonjsModule(function (module, exports) {\n'use strict';\n\nvar utils = exports;\n\n\n\n\nutils.assert = minimalisticAssert;\nutils.toArray = utils_1.toArray;\nutils.zero2 = utils_1.zero2;\nutils.toHex = utils_1.toHex;\nutils.encode = utils_1.encode;\n\n// Represent num in a w-NAF form\nfunction getNAF(num, w, bits) {\n  var naf = new Array(Math.max(num.bitLength(), bits) + 1);\n  naf.fill(0);\n\n  var ws = 1 << (w + 1);\n  var k = num.clone();\n\n  for (var i = 0; i < naf.length; i++) {\n    var z;\n    var mod = k.andln(ws - 1);\n    if (k.isOdd()) {\n      if (mod > (ws >> 1) - 1)\n        z = (ws >> 1) - mod;\n      else\n        z = mod;\n      k.isubn(z);\n    } else {\n      z = 0;\n    }\n\n    naf[i] = z;\n    k.iushrn(1);\n  }\n\n  return naf;\n}\nutils.getNAF = getNAF;\n\n// Represent k1, k2 in a Joint Sparse Form\nfunction getJSF(k1, k2) {\n  var jsf = [\n    [],\n    [],\n  ];\n\n  k1 = k1.clone();\n  k2 = k2.clone();\n  var d1 = 0;\n  var d2 = 0;\n  var m8;\n  while (k1.cmpn(-d1) > 0 || k2.cmpn(-d2) > 0) {\n    // First phase\n    var m14 = (k1.andln(3) + d1) & 3;\n    var m24 = (k2.andln(3) + d2) & 3;\n    if (m14 === 3)\n      m14 = -1;\n    if (m24 === 3)\n      m24 = -1;\n    var u1;\n    if ((m14 & 1) === 0) {\n      u1 = 0;\n    } else {\n      m8 = (k1.andln(7) + d1) & 7;\n      if ((m8 === 3 || m8 === 5) && m24 === 2)\n        u1 = -m14;\n      else\n        u1 = m14;\n    }\n    jsf[0].push(u1);\n\n    var u2;\n    if ((m24 & 1) === 0) {\n      u2 = 0;\n    } else {\n      m8 = (k2.andln(7) + d2) & 7;\n      if ((m8 === 3 || m8 === 5) && m14 === 2)\n        u2 = -m24;\n      else\n        u2 = m24;\n    }\n    jsf[1].push(u2);\n\n    // Second phase\n    if (2 * d1 === u1 + 1)\n      d1 = 1 - d1;\n    if (2 * d2 === u2 + 1)\n      d2 = 1 - d2;\n    k1.iushrn(1);\n    k2.iushrn(1);\n  }\n\n  return jsf;\n}\nutils.getJSF = getJSF;\n\nfunction cachedProperty(obj, name, computer) {\n  var key = '_' + name;\n  obj.prototype[name] = function cachedProperty() {\n    return this[key] !== undefined ? this[key] :\n      this[key] = computer.call(this);\n  };\n}\nutils.cachedProperty = cachedProperty;\n\nfunction parseBytes(bytes) {\n  return typeof bytes === 'string' ? utils.toArray(bytes, 'hex') :\n    bytes;\n}\nutils.parseBytes = parseBytes;\n\nfunction intFromLE(bytes) {\n  return new BN(bytes, 'hex', 'le');\n}\nutils.intFromLE = intFromLE;\n});\n\n'use strict';\n\n\n\nvar getNAF = utils_1$1.getNAF;\nvar getJSF = utils_1$1.getJSF;\nvar assert$1 = utils_1$1.assert;\n\nfunction BaseCurve(type, conf) {\n  this.type = type;\n  this.p = new BN(conf.p, 16);\n\n  // Use Montgomery, when there is no fast reduction for the prime\n  this.red = conf.prime ? BN.red(conf.prime) : BN.mont(this.p);\n\n  // Useful for many curves\n  this.zero = new BN(0).toRed(this.red);\n  this.one = new BN(1).toRed(this.red);\n  this.two = new BN(2).toRed(this.red);\n\n  // Curve configuration, optional\n  this.n = conf.n && new BN(conf.n, 16);\n  this.g = conf.g && this.pointFromJSON(conf.g, conf.gRed);\n\n  // Temporary arrays\n  this._wnafT1 = new Array(4);\n  this._wnafT2 = new Array(4);\n  this._wnafT3 = new Array(4);\n  this._wnafT4 = new Array(4);\n\n  this._bitLength = this.n ? this.n.bitLength() : 0;\n\n  // Generalized Greg Maxwell's trick\n  var adjustCount = this.n && this.p.div(this.n);\n  if (!adjustCount || adjustCount.cmpn(100) > 0) {\n    this.redN = null;\n  } else {\n    this._maxwellTrick = true;\n    this.redN = this.n.toRed(this.red);\n  }\n}\nvar base = BaseCurve;\n\nBaseCurve.prototype.point = function point() {\n  throw new Error('Not implemented');\n};\n\nBaseCurve.prototype.validate = function validate() {\n  throw new Error('Not implemented');\n};\n\nBaseCurve.prototype._fixedNafMul = function _fixedNafMul(p, k) {\n  assert$1(p.precomputed);\n  var doubles = p._getDoubles();\n\n  var naf = getNAF(k, 1, this._bitLength);\n  var I = (1 << (doubles.step + 1)) - (doubles.step % 2 === 0 ? 2 : 1);\n  I /= 3;\n\n  // Translate into more windowed form\n  var repr = [];\n  var j;\n  var nafW;\n  for (j = 0; j < naf.length; j += doubles.step) {\n    nafW = 0;\n    for (var l = j + doubles.step - 1; l >= j; l--)\n      nafW = (nafW << 1) + naf[l];\n    repr.push(nafW);\n  }\n\n  var a = this.jpoint(null, null, null);\n  var b = this.jpoint(null, null, null);\n  for (var i = I; i > 0; i--) {\n    for (j = 0; j < repr.length; j++) {\n      nafW = repr[j];\n      if (nafW === i)\n        b = b.mixedAdd(doubles.points[j]);\n      else if (nafW === -i)\n        b = b.mixedAdd(doubles.points[j].neg());\n    }\n    a = a.add(b);\n  }\n  return a.toP();\n};\n\nBaseCurve.prototype._wnafMul = function _wnafMul(p, k) {\n  var w = 4;\n\n  // Precompute window\n  var nafPoints = p._getNAFPoints(w);\n  w = nafPoints.wnd;\n  var wnd = nafPoints.points;\n\n  // Get NAF form\n  var naf = getNAF(k, w, this._bitLength);\n\n  // Add `this`*(N+1) for every w-NAF index\n  var acc = this.jpoint(null, null, null);\n  for (var i = naf.length - 1; i >= 0; i--) {\n    // Count zeroes\n    for (var l = 0; i >= 0 && naf[i] === 0; i--)\n      l++;\n    if (i >= 0)\n      l++;\n    acc = acc.dblp(l);\n\n    if (i < 0)\n      break;\n    var z = naf[i];\n    assert$1(z !== 0);\n    if (p.type === 'affine') {\n      // J +- P\n      if (z > 0)\n        acc = acc.mixedAdd(wnd[(z - 1) >> 1]);\n      else\n        acc = acc.mixedAdd(wnd[(-z - 1) >> 1].neg());\n    } else {\n      // J +- J\n      if (z > 0)\n        acc = acc.add(wnd[(z - 1) >> 1]);\n      else\n        acc = acc.add(wnd[(-z - 1) >> 1].neg());\n    }\n  }\n  return p.type === 'affine' ? acc.toP() : acc;\n};\n\nBaseCurve.prototype._wnafMulAdd = function _wnafMulAdd(defW,\n  points,\n  coeffs,\n  len,\n  jacobianResult) {\n  var wndWidth = this._wnafT1;\n  var wnd = this._wnafT2;\n  var naf = this._wnafT3;\n\n  // Fill all arrays\n  var max = 0;\n  var i;\n  var j;\n  var p;\n  for (i = 0; i < len; i++) {\n    p = points[i];\n    var nafPoints = p._getNAFPoints(defW);\n    wndWidth[i] = nafPoints.wnd;\n    wnd[i] = nafPoints.points;\n  }\n\n  // Comb small window NAFs\n  for (i = len - 1; i >= 1; i -= 2) {\n    var a = i - 1;\n    var b = i;\n    if (wndWidth[a] !== 1 || wndWidth[b] !== 1) {\n      naf[a] = getNAF(coeffs[a], wndWidth[a], this._bitLength);\n      naf[b] = getNAF(coeffs[b], wndWidth[b], this._bitLength);\n      max = Math.max(naf[a].length, max);\n      max = Math.max(naf[b].length, max);\n      continue;\n    }\n\n    var comb = [\n      points[a], /* 1 */\n      null, /* 3 */\n      null, /* 5 */\n      points[b], /* 7 */\n    ];\n\n    // Try to avoid Projective points, if possible\n    if (points[a].y.cmp(points[b].y) === 0) {\n      comb[1] = points[a].add(points[b]);\n      comb[2] = points[a].toJ().mixedAdd(points[b].neg());\n    } else if (points[a].y.cmp(points[b].y.redNeg()) === 0) {\n      comb[1] = points[a].toJ().mixedAdd(points[b]);\n      comb[2] = points[a].add(points[b].neg());\n    } else {\n      comb[1] = points[a].toJ().mixedAdd(points[b]);\n      comb[2] = points[a].toJ().mixedAdd(points[b].neg());\n    }\n\n    var index = [\n      -3, /* -1 -1 */\n      -1, /* -1 0 */\n      -5, /* -1 1 */\n      -7, /* 0 -1 */\n      0, /* 0 0 */\n      7, /* 0 1 */\n      5, /* 1 -1 */\n      1, /* 1 0 */\n      3,  /* 1 1 */\n    ];\n\n    var jsf = getJSF(coeffs[a], coeffs[b]);\n    max = Math.max(jsf[0].length, max);\n    naf[a] = new Array(max);\n    naf[b] = new Array(max);\n    for (j = 0; j < max; j++) {\n      var ja = jsf[0][j] | 0;\n      var jb = jsf[1][j] | 0;\n\n      naf[a][j] = index[(ja + 1) * 3 + (jb + 1)];\n      naf[b][j] = 0;\n      wnd[a] = comb;\n    }\n  }\n\n  var acc = this.jpoint(null, null, null);\n  var tmp = this._wnafT4;\n  for (i = max; i >= 0; i--) {\n    var k = 0;\n\n    while (i >= 0) {\n      var zero = true;\n      for (j = 0; j < len; j++) {\n        tmp[j] = naf[j][i] | 0;\n        if (tmp[j] !== 0)\n          zero = false;\n      }\n      if (!zero)\n        break;\n      k++;\n      i--;\n    }\n    if (i >= 0)\n      k++;\n    acc = acc.dblp(k);\n    if (i < 0)\n      break;\n\n    for (j = 0; j < len; j++) {\n      var z = tmp[j];\n      p;\n      if (z === 0)\n        continue;\n      else if (z > 0)\n        p = wnd[j][(z - 1) >> 1];\n      else if (z < 0)\n        p = wnd[j][(-z - 1) >> 1].neg();\n\n      if (p.type === 'affine')\n        acc = acc.mixedAdd(p);\n      else\n        acc = acc.add(p);\n    }\n  }\n  // Zeroify references\n  for (i = 0; i < len; i++)\n    wnd[i] = null;\n\n  if (jacobianResult)\n    return acc;\n  else\n    return acc.toP();\n};\n\nfunction BasePoint(curve, type) {\n  this.curve = curve;\n  this.type = type;\n  this.precomputed = null;\n}\nBaseCurve.BasePoint = BasePoint;\n\nBasePoint.prototype.eq = function eq(/*other*/) {\n  throw new Error('Not implemented');\n};\n\nBasePoint.prototype.validate = function validate() {\n  return this.curve.validate(this);\n};\n\nBaseCurve.prototype.decodePoint = function decodePoint(bytes, enc) {\n  bytes = utils_1$1.toArray(bytes, enc);\n\n  var len = this.p.byteLength();\n\n  // uncompressed, hybrid-odd, hybrid-even\n  if ((bytes[0] === 0x04 || bytes[0] === 0x06 || bytes[0] === 0x07) &&\n      bytes.length - 1 === 2 * len) {\n    if (bytes[0] === 0x06)\n      assert$1(bytes[bytes.length - 1] % 2 === 0);\n    else if (bytes[0] === 0x07)\n      assert$1(bytes[bytes.length - 1] % 2 === 1);\n\n    var res =  this.point(bytes.slice(1, 1 + len),\n      bytes.slice(1 + len, 1 + 2 * len));\n\n    return res;\n  } else if ((bytes[0] === 0x02 || bytes[0] === 0x03) &&\n              bytes.length - 1 === len) {\n    return this.pointFromX(bytes.slice(1, 1 + len), bytes[0] === 0x03);\n  }\n  throw new Error('Unknown point format');\n};\n\nBasePoint.prototype.encodeCompressed = function encodeCompressed(enc) {\n  return this.encode(enc, true);\n};\n\nBasePoint.prototype._encode = function _encode(compact) {\n  var len = this.curve.p.byteLength();\n  var x = this.getX().toArray('be', len);\n\n  if (compact)\n    return [ this.getY().isEven() ? 0x02 : 0x03 ].concat(x);\n\n  return [ 0x04 ].concat(x, this.getY().toArray('be', len));\n};\n\nBasePoint.prototype.encode = function encode(enc, compact) {\n  return utils_1$1.encode(this._encode(compact), enc);\n};\n\nBasePoint.prototype.precompute = function precompute(power) {\n  if (this.precomputed)\n    return this;\n\n  var precomputed = {\n    doubles: null,\n    naf: null,\n    beta: null,\n  };\n  precomputed.naf = this._getNAFPoints(8);\n  precomputed.doubles = this._getDoubles(4, power);\n  precomputed.beta = this._getBeta();\n  this.precomputed = precomputed;\n\n  return this;\n};\n\nBasePoint.prototype._hasDoubles = function _hasDoubles(k) {\n  if (!this.precomputed)\n    return false;\n\n  var doubles = this.precomputed.doubles;\n  if (!doubles)\n    return false;\n\n  return doubles.points.length >= Math.ceil((k.bitLength() + 1) / doubles.step);\n};\n\nBasePoint.prototype._getDoubles = function _getDoubles(step, power) {\n  if (this.precomputed && this.precomputed.doubles)\n    return this.precomputed.doubles;\n\n  var doubles = [ this ];\n  var acc = this;\n  for (var i = 0; i < power; i += step) {\n    for (var j = 0; j < step; j++)\n      acc = acc.dbl();\n    doubles.push(acc);\n  }\n  return {\n    step: step,\n    points: doubles,\n  };\n};\n\nBasePoint.prototype._getNAFPoints = function _getNAFPoints(wnd) {\n  if (this.precomputed && this.precomputed.naf)\n    return this.precomputed.naf;\n\n  var res = [ this ];\n  var max = (1 << wnd) - 1;\n  var dbl = max === 1 ? null : this.dbl();\n  for (var i = 1; i < max; i++)\n    res[i] = res[i - 1].add(dbl);\n  return {\n    wnd: wnd,\n    points: res,\n  };\n};\n\nBasePoint.prototype._getBeta = function _getBeta() {\n  return null;\n};\n\nBasePoint.prototype.dblp = function dblp(k) {\n  var r = this;\n  for (var i = 0; i < k; i++)\n    r = r.dbl();\n  return r;\n};\n\nvar inherits_browser = createCommonjsModule(function (module) {\nif (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor;\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor;\n      var TempCtor = function () {};\n      TempCtor.prototype = superCtor.prototype;\n      ctor.prototype = new TempCtor();\n      ctor.prototype.constructor = ctor;\n    }\n  };\n}\n});\n\n'use strict';\n\n\n\n\n\n\nvar assert$2 = utils_1$1.assert;\n\nfunction ShortCurve(conf) {\n  base.call(this, 'short', conf);\n\n  this.a = new BN(conf.a, 16).toRed(this.red);\n  this.b = new BN(conf.b, 16).toRed(this.red);\n  this.tinv = this.two.redInvm();\n\n  this.zeroA = this.a.fromRed().cmpn(0) === 0;\n  this.threeA = this.a.fromRed().sub(this.p).cmpn(-3) === 0;\n\n  // If the curve is endomorphic, precalculate beta and lambda\n  this.endo = this._getEndomorphism(conf);\n  this._endoWnafT1 = new Array(4);\n  this._endoWnafT2 = new Array(4);\n}\ninherits_browser(ShortCurve, base);\nvar short_1 = ShortCurve;\n\nShortCurve.prototype._getEndomorphism = function _getEndomorphism(conf) {\n  // No efficient endomorphism\n  if (!this.zeroA || !this.g || !this.n || this.p.modn(3) !== 1)\n    return;\n\n  // Compute beta and lambda, that lambda * P = (beta * Px; Py)\n  var beta;\n  var lambda;\n  if (conf.beta) {\n    beta = new BN(conf.beta, 16).toRed(this.red);\n  } else {\n    var betas = this._getEndoRoots(this.p);\n    // Choose the smallest beta\n    beta = betas[0].cmp(betas[1]) < 0 ? betas[0] : betas[1];\n    beta = beta.toRed(this.red);\n  }\n  if (conf.lambda) {\n    lambda = new BN(conf.lambda, 16);\n  } else {\n    // Choose the lambda that is matching selected beta\n    var lambdas = this._getEndoRoots(this.n);\n    if (this.g.mul(lambdas[0]).x.cmp(this.g.x.redMul(beta)) === 0) {\n      lambda = lambdas[0];\n    } else {\n      lambda = lambdas[1];\n      assert$2(this.g.mul(lambda).x.cmp(this.g.x.redMul(beta)) === 0);\n    }\n  }\n\n  // Get basis vectors, used for balanced length-two representation\n  var basis;\n  if (conf.basis) {\n    basis = conf.basis.map(function(vec) {\n      return {\n        a: new BN(vec.a, 16),\n        b: new BN(vec.b, 16),\n      };\n    });\n  } else {\n    basis = this._getEndoBasis(lambda);\n  }\n\n  return {\n    beta: beta,\n    lambda: lambda,\n    basis: basis,\n  };\n};\n\nShortCurve.prototype._getEndoRoots = function _getEndoRoots(num) {\n  // Find roots of for x^2 + x + 1 in F\n  // Root = (-1 +- Sqrt(-3)) / 2\n  //\n  var red = num === this.p ? this.red : BN.mont(num);\n  var tinv = new BN(2).toRed(red).redInvm();\n  var ntinv = tinv.redNeg();\n\n  var s = new BN(3).toRed(red).redNeg().redSqrt().redMul(tinv);\n\n  var l1 = ntinv.redAdd(s).fromRed();\n  var l2 = ntinv.redSub(s).fromRed();\n  return [ l1, l2 ];\n};\n\nShortCurve.prototype._getEndoBasis = function _getEndoBasis(lambda) {\n  // aprxSqrt >= sqrt(this.n)\n  var aprxSqrt = this.n.ushrn(Math.floor(this.n.bitLength() / 2));\n\n  // 3.74\n  // Run EGCD, until r(L + 1) < aprxSqrt\n  var u = lambda;\n  var v = this.n.clone();\n  var x1 = new BN(1);\n  var y1 = new BN(0);\n  var x2 = new BN(0);\n  var y2 = new BN(1);\n\n  // NOTE: all vectors are roots of: a + b * lambda = 0 (mod n)\n  var a0;\n  var b0;\n  // First vector\n  var a1;\n  var b1;\n  // Second vector\n  var a2;\n  var b2;\n\n  var prevR;\n  var i = 0;\n  var r;\n  var x;\n  while (u.cmpn(0) !== 0) {\n    var q = v.div(u);\n    r = v.sub(q.mul(u));\n    x = x2.sub(q.mul(x1));\n    var y = y2.sub(q.mul(y1));\n\n    if (!a1 && r.cmp(aprxSqrt) < 0) {\n      a0 = prevR.neg();\n      b0 = x1;\n      a1 = r.neg();\n      b1 = x;\n    } else if (a1 && ++i === 2) {\n      break;\n    }\n    prevR = r;\n\n    v = u;\n    u = r;\n    x2 = x1;\n    x1 = x;\n    y2 = y1;\n    y1 = y;\n  }\n  a2 = r.neg();\n  b2 = x;\n\n  var len1 = a1.sqr().add(b1.sqr());\n  var len2 = a2.sqr().add(b2.sqr());\n  if (len2.cmp(len1) >= 0) {\n    a2 = a0;\n    b2 = b0;\n  }\n\n  // Normalize signs\n  if (a1.negative) {\n    a1 = a1.neg();\n    b1 = b1.neg();\n  }\n  if (a2.negative) {\n    a2 = a2.neg();\n    b2 = b2.neg();\n  }\n\n  return [\n    { a: a1, b: b1 },\n    { a: a2, b: b2 },\n  ];\n};\n\nShortCurve.prototype._endoSplit = function _endoSplit(k) {\n  var basis = this.endo.basis;\n  var v1 = basis[0];\n  var v2 = basis[1];\n\n  var c1 = v2.b.mul(k).divRound(this.n);\n  var c2 = v1.b.neg().mul(k).divRound(this.n);\n\n  var p1 = c1.mul(v1.a);\n  var p2 = c2.mul(v2.a);\n  var q1 = c1.mul(v1.b);\n  var q2 = c2.mul(v2.b);\n\n  // Calculate answer\n  var k1 = k.sub(p1).sub(p2);\n  var k2 = q1.add(q2).neg();\n  return { k1: k1, k2: k2 };\n};\n\nShortCurve.prototype.pointFromX = function pointFromX(x, odd) {\n  x = new BN(x, 16);\n  if (!x.red)\n    x = x.toRed(this.red);\n\n  var y2 = x.redSqr().redMul(x).redIAdd(x.redMul(this.a)).redIAdd(this.b);\n  var y = y2.redSqrt();\n  if (y.redSqr().redSub(y2).cmp(this.zero) !== 0)\n    throw new Error('invalid point');\n\n  // XXX Is there any way to tell if the number is odd without converting it\n  // to non-red form?\n  var isOdd = y.fromRed().isOdd();\n  if (odd && !isOdd || !odd && isOdd)\n    y = y.redNeg();\n\n  return this.point(x, y);\n};\n\nShortCurve.prototype.validate = function validate(point) {\n  if (point.inf)\n    return true;\n\n  var x = point.x;\n  var y = point.y;\n\n  var ax = this.a.redMul(x);\n  var rhs = x.redSqr().redMul(x).redIAdd(ax).redIAdd(this.b);\n  return y.redSqr().redISub(rhs).cmpn(0) === 0;\n};\n\nShortCurve.prototype._endoWnafMulAdd =\n    function _endoWnafMulAdd(points, coeffs, jacobianResult) {\n      var npoints = this._endoWnafT1;\n      var ncoeffs = this._endoWnafT2;\n      for (var i = 0; i < points.length; i++) {\n        var split = this._endoSplit(coeffs[i]);\n        var p = points[i];\n        var beta = p._getBeta();\n\n        if (split.k1.negative) {\n          split.k1.ineg();\n          p = p.neg(true);\n        }\n        if (split.k2.negative) {\n          split.k2.ineg();\n          beta = beta.neg(true);\n        }\n\n        npoints[i * 2] = p;\n        npoints[i * 2 + 1] = beta;\n        ncoeffs[i * 2] = split.k1;\n        ncoeffs[i * 2 + 1] = split.k2;\n      }\n      var res = this._wnafMulAdd(1, npoints, ncoeffs, i * 2, jacobianResult);\n\n      // Clean-up references to points and coefficients\n      for (var j = 0; j < i * 2; j++) {\n        npoints[j] = null;\n        ncoeffs[j] = null;\n      }\n      return res;\n    };\n\nfunction Point(curve, x, y, isRed) {\n  base.BasePoint.call(this, curve, 'affine');\n  if (x === null && y === null) {\n    this.x = null;\n    this.y = null;\n    this.inf = true;\n  } else {\n    this.x = new BN(x, 16);\n    this.y = new BN(y, 16);\n    // Force redgomery representation when loading from JSON\n    if (isRed) {\n      this.x.forceRed(this.curve.red);\n      this.y.forceRed(this.curve.red);\n    }\n    if (!this.x.red)\n      this.x = this.x.toRed(this.curve.red);\n    if (!this.y.red)\n      this.y = this.y.toRed(this.curve.red);\n    this.inf = false;\n  }\n}\ninherits_browser(Point, base.BasePoint);\n\nShortCurve.prototype.point = function point(x, y, isRed) {\n  return new Point(this, x, y, isRed);\n};\n\nShortCurve.prototype.pointFromJSON = function pointFromJSON(obj, red) {\n  return Point.fromJSON(this, obj, red);\n};\n\nPoint.prototype._getBeta = function _getBeta() {\n  if (!this.curve.endo)\n    return;\n\n  var pre = this.precomputed;\n  if (pre && pre.beta)\n    return pre.beta;\n\n  var beta = this.curve.point(this.x.redMul(this.curve.endo.beta), this.y);\n  if (pre) {\n    var curve = this.curve;\n    var endoMul = function(p) {\n      return curve.point(p.x.redMul(curve.endo.beta), p.y);\n    };\n    pre.beta = beta;\n    beta.precomputed = {\n      beta: null,\n      naf: pre.naf && {\n        wnd: pre.naf.wnd,\n        points: pre.naf.points.map(endoMul),\n      },\n      doubles: pre.doubles && {\n        step: pre.doubles.step,\n        points: pre.doubles.points.map(endoMul),\n      },\n    };\n  }\n  return beta;\n};\n\nPoint.prototype.toJSON = function toJSON() {\n  if (!this.precomputed)\n    return [ this.x, this.y ];\n\n  return [ this.x, this.y, this.precomputed && {\n    doubles: this.precomputed.doubles && {\n      step: this.precomputed.doubles.step,\n      points: this.precomputed.doubles.points.slice(1),\n    },\n    naf: this.precomputed.naf && {\n      wnd: this.precomputed.naf.wnd,\n      points: this.precomputed.naf.points.slice(1),\n    },\n  } ];\n};\n\nPoint.fromJSON = function fromJSON(curve, obj, red) {\n  if (typeof obj === 'string')\n    obj = JSON.parse(obj);\n  var res = curve.point(obj[0], obj[1], red);\n  if (!obj[2])\n    return res;\n\n  function obj2point(obj) {\n    return curve.point(obj[0], obj[1], red);\n  }\n\n  var pre = obj[2];\n  res.precomputed = {\n    beta: null,\n    doubles: pre.doubles && {\n      step: pre.doubles.step,\n      points: [ res ].concat(pre.doubles.points.map(obj2point)),\n    },\n    naf: pre.naf && {\n      wnd: pre.naf.wnd,\n      points: [ res ].concat(pre.naf.points.map(obj2point)),\n    },\n  };\n  return res;\n};\n\nPoint.prototype.inspect = function inspect() {\n  if (this.isInfinity())\n    return '<EC Point Infinity>';\n  return '<EC Point x: ' + this.x.fromRed().toString(16, 2) +\n      ' y: ' + this.y.fromRed().toString(16, 2) + '>';\n};\n\nPoint.prototype.isInfinity = function isInfinity() {\n  return this.inf;\n};\n\nPoint.prototype.add = function add(p) {\n  // O + P = P\n  if (this.inf)\n    return p;\n\n  // P + O = P\n  if (p.inf)\n    return this;\n\n  // P + P = 2P\n  if (this.eq(p))\n    return this.dbl();\n\n  // P + (-P) = O\n  if (this.neg().eq(p))\n    return this.curve.point(null, null);\n\n  // P + Q = O\n  if (this.x.cmp(p.x) === 0)\n    return this.curve.point(null, null);\n\n  var c = this.y.redSub(p.y);\n  if (c.cmpn(0) !== 0)\n    c = c.redMul(this.x.redSub(p.x).redInvm());\n  var nx = c.redSqr().redISub(this.x).redISub(p.x);\n  var ny = c.redMul(this.x.redSub(nx)).redISub(this.y);\n  return this.curve.point(nx, ny);\n};\n\nPoint.prototype.dbl = function dbl() {\n  if (this.inf)\n    return this;\n\n  // 2P = O\n  var ys1 = this.y.redAdd(this.y);\n  if (ys1.cmpn(0) === 0)\n    return this.curve.point(null, null);\n\n  var a = this.curve.a;\n\n  var x2 = this.x.redSqr();\n  var dyinv = ys1.redInvm();\n  var c = x2.redAdd(x2).redIAdd(x2).redIAdd(a).redMul(dyinv);\n\n  var nx = c.redSqr().redISub(this.x.redAdd(this.x));\n  var ny = c.redMul(this.x.redSub(nx)).redISub(this.y);\n  return this.curve.point(nx, ny);\n};\n\nPoint.prototype.getX = function getX() {\n  return this.x.fromRed();\n};\n\nPoint.prototype.getY = function getY() {\n  return this.y.fromRed();\n};\n\nPoint.prototype.mul = function mul(k) {\n  k = new BN(k, 16);\n  if (this.isInfinity())\n    return this;\n  else if (this._hasDoubles(k))\n    return this.curve._fixedNafMul(this, k);\n  else if (this.curve.endo)\n    return this.curve._endoWnafMulAdd([ this ], [ k ]);\n  else\n    return this.curve._wnafMul(this, k);\n};\n\nPoint.prototype.mulAdd = function mulAdd(k1, p2, k2) {\n  var points = [ this, p2 ];\n  var coeffs = [ k1, k2 ];\n  if (this.curve.endo)\n    return this.curve._endoWnafMulAdd(points, coeffs);\n  else\n    return this.curve._wnafMulAdd(1, points, coeffs, 2);\n};\n\nPoint.prototype.jmulAdd = function jmulAdd(k1, p2, k2) {\n  var points = [ this, p2 ];\n  var coeffs = [ k1, k2 ];\n  if (this.curve.endo)\n    return this.curve._endoWnafMulAdd(points, coeffs, true);\n  else\n    return this.curve._wnafMulAdd(1, points, coeffs, 2, true);\n};\n\nPoint.prototype.eq = function eq(p) {\n  return this === p ||\n         this.inf === p.inf &&\n             (this.inf || this.x.cmp(p.x) === 0 && this.y.cmp(p.y) === 0);\n};\n\nPoint.prototype.neg = function neg(_precompute) {\n  if (this.inf)\n    return this;\n\n  var res = this.curve.point(this.x, this.y.redNeg());\n  if (_precompute && this.precomputed) {\n    var pre = this.precomputed;\n    var negate = function(p) {\n      return p.neg();\n    };\n    res.precomputed = {\n      naf: pre.naf && {\n        wnd: pre.naf.wnd,\n        points: pre.naf.points.map(negate),\n      },\n      doubles: pre.doubles && {\n        step: pre.doubles.step,\n        points: pre.doubles.points.map(negate),\n      },\n    };\n  }\n  return res;\n};\n\nPoint.prototype.toJ = function toJ() {\n  if (this.inf)\n    return this.curve.jpoint(null, null, null);\n\n  var res = this.curve.jpoint(this.x, this.y, this.curve.one);\n  return res;\n};\n\nfunction JPoint(curve, x, y, z) {\n  base.BasePoint.call(this, curve, 'jacobian');\n  if (x === null && y === null && z === null) {\n    this.x = this.curve.one;\n    this.y = this.curve.one;\n    this.z = new BN(0);\n  } else {\n    this.x = new BN(x, 16);\n    this.y = new BN(y, 16);\n    this.z = new BN(z, 16);\n  }\n  if (!this.x.red)\n    this.x = this.x.toRed(this.curve.red);\n  if (!this.y.red)\n    this.y = this.y.toRed(this.curve.red);\n  if (!this.z.red)\n    this.z = this.z.toRed(this.curve.red);\n\n  this.zOne = this.z === this.curve.one;\n}\ninherits_browser(JPoint, base.BasePoint);\n\nShortCurve.prototype.jpoint = function jpoint(x, y, z) {\n  return new JPoint(this, x, y, z);\n};\n\nJPoint.prototype.toP = function toP() {\n  if (this.isInfinity())\n    return this.curve.point(null, null);\n\n  var zinv = this.z.redInvm();\n  var zinv2 = zinv.redSqr();\n  var ax = this.x.redMul(zinv2);\n  var ay = this.y.redMul(zinv2).redMul(zinv);\n\n  return this.curve.point(ax, ay);\n};\n\nJPoint.prototype.neg = function neg() {\n  return this.curve.jpoint(this.x, this.y.redNeg(), this.z);\n};\n\nJPoint.prototype.add = function add(p) {\n  // O + P = P\n  if (this.isInfinity())\n    return p;\n\n  // P + O = P\n  if (p.isInfinity())\n    return this;\n\n  // 12M + 4S + 7A\n  var pz2 = p.z.redSqr();\n  var z2 = this.z.redSqr();\n  var u1 = this.x.redMul(pz2);\n  var u2 = p.x.redMul(z2);\n  var s1 = this.y.redMul(pz2.redMul(p.z));\n  var s2 = p.y.redMul(z2.redMul(this.z));\n\n  var h = u1.redSub(u2);\n  var r = s1.redSub(s2);\n  if (h.cmpn(0) === 0) {\n    if (r.cmpn(0) !== 0)\n      return this.curve.jpoint(null, null, null);\n    else\n      return this.dbl();\n  }\n\n  var h2 = h.redSqr();\n  var h3 = h2.redMul(h);\n  var v = u1.redMul(h2);\n\n  var nx = r.redSqr().redIAdd(h3).redISub(v).redISub(v);\n  var ny = r.redMul(v.redISub(nx)).redISub(s1.redMul(h3));\n  var nz = this.z.redMul(p.z).redMul(h);\n\n  return this.curve.jpoint(nx, ny, nz);\n};\n\nJPoint.prototype.mixedAdd = function mixedAdd(p) {\n  // O + P = P\n  if (this.isInfinity())\n    return p.toJ();\n\n  // P + O = P\n  if (p.isInfinity())\n    return this;\n\n  // 8M + 3S + 7A\n  var z2 = this.z.redSqr();\n  var u1 = this.x;\n  var u2 = p.x.redMul(z2);\n  var s1 = this.y;\n  var s2 = p.y.redMul(z2).redMul(this.z);\n\n  var h = u1.redSub(u2);\n  var r = s1.redSub(s2);\n  if (h.cmpn(0) === 0) {\n    if (r.cmpn(0) !== 0)\n      return this.curve.jpoint(null, null, null);\n    else\n      return this.dbl();\n  }\n\n  var h2 = h.redSqr();\n  var h3 = h2.redMul(h);\n  var v = u1.redMul(h2);\n\n  var nx = r.redSqr().redIAdd(h3).redISub(v).redISub(v);\n  var ny = r.redMul(v.redISub(nx)).redISub(s1.redMul(h3));\n  var nz = this.z.redMul(h);\n\n  return this.curve.jpoint(nx, ny, nz);\n};\n\nJPoint.prototype.dblp = function dblp(pow) {\n  if (pow === 0)\n    return this;\n  if (this.isInfinity())\n    return this;\n  if (!pow)\n    return this.dbl();\n\n  var i;\n  if (this.curve.zeroA || this.curve.threeA) {\n    var r = this;\n    for (i = 0; i < pow; i++)\n      r = r.dbl();\n    return r;\n  }\n\n  // 1M + 2S + 1A + N * (4S + 5M + 8A)\n  // N = 1 => 6M + 6S + 9A\n  var a = this.curve.a;\n  var tinv = this.curve.tinv;\n\n  var jx = this.x;\n  var jy = this.y;\n  var jz = this.z;\n  var jz4 = jz.redSqr().redSqr();\n\n  // Reuse results\n  var jyd = jy.redAdd(jy);\n  for (i = 0; i < pow; i++) {\n    var jx2 = jx.redSqr();\n    var jyd2 = jyd.redSqr();\n    var jyd4 = jyd2.redSqr();\n    var c = jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4));\n\n    var t1 = jx.redMul(jyd2);\n    var nx = c.redSqr().redISub(t1.redAdd(t1));\n    var t2 = t1.redISub(nx);\n    var dny = c.redMul(t2);\n    dny = dny.redIAdd(dny).redISub(jyd4);\n    var nz = jyd.redMul(jz);\n    if (i + 1 < pow)\n      jz4 = jz4.redMul(jyd4);\n\n    jx = nx;\n    jz = nz;\n    jyd = dny;\n  }\n\n  return this.curve.jpoint(jx, jyd.redMul(tinv), jz);\n};\n\nJPoint.prototype.dbl = function dbl() {\n  if (this.isInfinity())\n    return this;\n\n  if (this.curve.zeroA)\n    return this._zeroDbl();\n  else if (this.curve.threeA)\n    return this._threeDbl();\n  else\n    return this._dbl();\n};\n\nJPoint.prototype._zeroDbl = function _zeroDbl() {\n  var nx;\n  var ny;\n  var nz;\n  // Z = 1\n  if (this.zOne) {\n    // hyperelliptic.org/EFD/g1p/auto-shortw-jacobian-0.html\n    //     #doubling-mdbl-2007-bl\n    // 1M + 5S + 14A\n\n    // XX = X1^2\n    var xx = this.x.redSqr();\n    // YY = Y1^2\n    var yy = this.y.redSqr();\n    // YYYY = YY^2\n    var yyyy = yy.redSqr();\n    // S = 2 * ((X1 + YY)^2 - XX - YYYY)\n    var s = this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);\n    s = s.redIAdd(s);\n    // M = 3 * XX + a; a = 0\n    var m = xx.redAdd(xx).redIAdd(xx);\n    // T = M ^ 2 - 2*S\n    var t = m.redSqr().redISub(s).redISub(s);\n\n    // 8 * YYYY\n    var yyyy8 = yyyy.redIAdd(yyyy);\n    yyyy8 = yyyy8.redIAdd(yyyy8);\n    yyyy8 = yyyy8.redIAdd(yyyy8);\n\n    // X3 = T\n    nx = t;\n    // Y3 = M * (S - T) - 8 * YYYY\n    ny = m.redMul(s.redISub(t)).redISub(yyyy8);\n    // Z3 = 2*Y1\n    nz = this.y.redAdd(this.y);\n  } else {\n    // hyperelliptic.org/EFD/g1p/auto-shortw-jacobian-0.html\n    //     #doubling-dbl-2009-l\n    // 2M + 5S + 13A\n\n    // A = X1^2\n    var a = this.x.redSqr();\n    // B = Y1^2\n    var b = this.y.redSqr();\n    // C = B^2\n    var c = b.redSqr();\n    // D = 2 * ((X1 + B)^2 - A - C)\n    var d = this.x.redAdd(b).redSqr().redISub(a).redISub(c);\n    d = d.redIAdd(d);\n    // E = 3 * A\n    var e = a.redAdd(a).redIAdd(a);\n    // F = E^2\n    var f = e.redSqr();\n\n    // 8 * C\n    var c8 = c.redIAdd(c);\n    c8 = c8.redIAdd(c8);\n    c8 = c8.redIAdd(c8);\n\n    // X3 = F - 2 * D\n    nx = f.redISub(d).redISub(d);\n    // Y3 = E * (D - X3) - 8 * C\n    ny = e.redMul(d.redISub(nx)).redISub(c8);\n    // Z3 = 2 * Y1 * Z1\n    nz = this.y.redMul(this.z);\n    nz = nz.redIAdd(nz);\n  }\n\n  return this.curve.jpoint(nx, ny, nz);\n};\n\nJPoint.prototype._threeDbl = function _threeDbl() {\n  var nx;\n  var ny;\n  var nz;\n  // Z = 1\n  if (this.zOne) {\n    // hyperelliptic.org/EFD/g1p/auto-shortw-jacobian-3.html\n    //     #doubling-mdbl-2007-bl\n    // 1M + 5S + 15A\n\n    // XX = X1^2\n    var xx = this.x.redSqr();\n    // YY = Y1^2\n    var yy = this.y.redSqr();\n    // YYYY = YY^2\n    var yyyy = yy.redSqr();\n    // S = 2 * ((X1 + YY)^2 - XX - YYYY)\n    var s = this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);\n    s = s.redIAdd(s);\n    // M = 3 * XX + a\n    var m = xx.redAdd(xx).redIAdd(xx).redIAdd(this.curve.a);\n    // T = M^2 - 2 * S\n    var t = m.redSqr().redISub(s).redISub(s);\n    // X3 = T\n    nx = t;\n    // Y3 = M * (S - T) - 8 * YYYY\n    var yyyy8 = yyyy.redIAdd(yyyy);\n    yyyy8 = yyyy8.redIAdd(yyyy8);\n    yyyy8 = yyyy8.redIAdd(yyyy8);\n    ny = m.redMul(s.redISub(t)).redISub(yyyy8);\n    // Z3 = 2 * Y1\n    nz = this.y.redAdd(this.y);\n  } else {\n    // hyperelliptic.org/EFD/g1p/auto-shortw-jacobian-3.html#doubling-dbl-2001-b\n    // 3M + 5S\n\n    // delta = Z1^2\n    var delta = this.z.redSqr();\n    // gamma = Y1^2\n    var gamma = this.y.redSqr();\n    // beta = X1 * gamma\n    var beta = this.x.redMul(gamma);\n    // alpha = 3 * (X1 - delta) * (X1 + delta)\n    var alpha = this.x.redSub(delta).redMul(this.x.redAdd(delta));\n    alpha = alpha.redAdd(alpha).redIAdd(alpha);\n    // X3 = alpha^2 - 8 * beta\n    var beta4 = beta.redIAdd(beta);\n    beta4 = beta4.redIAdd(beta4);\n    var beta8 = beta4.redAdd(beta4);\n    nx = alpha.redSqr().redISub(beta8);\n    // Z3 = (Y1 + Z1)^2 - gamma - delta\n    nz = this.y.redAdd(this.z).redSqr().redISub(gamma).redISub(delta);\n    // Y3 = alpha * (4 * beta - X3) - 8 * gamma^2\n    var ggamma8 = gamma.redSqr();\n    ggamma8 = ggamma8.redIAdd(ggamma8);\n    ggamma8 = ggamma8.redIAdd(ggamma8);\n    ggamma8 = ggamma8.redIAdd(ggamma8);\n    ny = alpha.redMul(beta4.redISub(nx)).redISub(ggamma8);\n  }\n\n  return this.curve.jpoint(nx, ny, nz);\n};\n\nJPoint.prototype._dbl = function _dbl() {\n  var a = this.curve.a;\n\n  // 4M + 6S + 10A\n  var jx = this.x;\n  var jy = this.y;\n  var jz = this.z;\n  var jz4 = jz.redSqr().redSqr();\n\n  var jx2 = jx.redSqr();\n  var jy2 = jy.redSqr();\n\n  var c = jx2.redAdd(jx2).redIAdd(jx2).redIAdd(a.redMul(jz4));\n\n  var jxd4 = jx.redAdd(jx);\n  jxd4 = jxd4.redIAdd(jxd4);\n  var t1 = jxd4.redMul(jy2);\n  var nx = c.redSqr().redISub(t1.redAdd(t1));\n  var t2 = t1.redISub(nx);\n\n  var jyd8 = jy2.redSqr();\n  jyd8 = jyd8.redIAdd(jyd8);\n  jyd8 = jyd8.redIAdd(jyd8);\n  jyd8 = jyd8.redIAdd(jyd8);\n  var ny = c.redMul(t2).redISub(jyd8);\n  var nz = jy.redAdd(jy).redMul(jz);\n\n  return this.curve.jpoint(nx, ny, nz);\n};\n\nJPoint.prototype.trpl = function trpl() {\n  if (!this.curve.zeroA)\n    return this.dbl().add(this);\n\n  // hyperelliptic.org/EFD/g1p/auto-shortw-jacobian-0.html#tripling-tpl-2007-bl\n  // 5M + 10S + ...\n\n  // XX = X1^2\n  var xx = this.x.redSqr();\n  // YY = Y1^2\n  var yy = this.y.redSqr();\n  // ZZ = Z1^2\n  var zz = this.z.redSqr();\n  // YYYY = YY^2\n  var yyyy = yy.redSqr();\n  // M = 3 * XX + a * ZZ2; a = 0\n  var m = xx.redAdd(xx).redIAdd(xx);\n  // MM = M^2\n  var mm = m.redSqr();\n  // E = 6 * ((X1 + YY)^2 - XX - YYYY) - MM\n  var e = this.x.redAdd(yy).redSqr().redISub(xx).redISub(yyyy);\n  e = e.redIAdd(e);\n  e = e.redAdd(e).redIAdd(e);\n  e = e.redISub(mm);\n  // EE = E^2\n  var ee = e.redSqr();\n  // T = 16*YYYY\n  var t = yyyy.redIAdd(yyyy);\n  t = t.redIAdd(t);\n  t = t.redIAdd(t);\n  t = t.redIAdd(t);\n  // U = (M + E)^2 - MM - EE - T\n  var u = m.redIAdd(e).redSqr().redISub(mm).redISub(ee).redISub(t);\n  // X3 = 4 * (X1 * EE - 4 * YY * U)\n  var yyu4 = yy.redMul(u);\n  yyu4 = yyu4.redIAdd(yyu4);\n  yyu4 = yyu4.redIAdd(yyu4);\n  var nx = this.x.redMul(ee).redISub(yyu4);\n  nx = nx.redIAdd(nx);\n  nx = nx.redIAdd(nx);\n  // Y3 = 8 * Y1 * (U * (T - U) - E * EE)\n  var ny = this.y.redMul(u.redMul(t.redISub(u)).redISub(e.redMul(ee)));\n  ny = ny.redIAdd(ny);\n  ny = ny.redIAdd(ny);\n  ny = ny.redIAdd(ny);\n  // Z3 = (Z1 + E)^2 - ZZ - EE\n  var nz = this.z.redAdd(e).redSqr().redISub(zz).redISub(ee);\n\n  return this.curve.jpoint(nx, ny, nz);\n};\n\nJPoint.prototype.mul = function mul(k, kbase) {\n  k = new BN(k, kbase);\n\n  return this.curve._wnafMul(this, k);\n};\n\nJPoint.prototype.eq = function eq(p) {\n  if (p.type === 'affine')\n    return this.eq(p.toJ());\n\n  if (this === p)\n    return true;\n\n  // x1 * z2^2 == x2 * z1^2\n  var z2 = this.z.redSqr();\n  var pz2 = p.z.redSqr();\n  if (this.x.redMul(pz2).redISub(p.x.redMul(z2)).cmpn(0) !== 0)\n    return false;\n\n  // y1 * z2^3 == y2 * z1^3\n  var z3 = z2.redMul(this.z);\n  var pz3 = pz2.redMul(p.z);\n  return this.y.redMul(pz3).redISub(p.y.redMul(z3)).cmpn(0) === 0;\n};\n\nJPoint.prototype.eqXToP = function eqXToP(x) {\n  var zs = this.z.redSqr();\n  var rx = x.toRed(this.curve.red).redMul(zs);\n  if (this.x.cmp(rx) === 0)\n    return true;\n\n  var xc = x.clone();\n  var t = this.curve.redN.redMul(zs);\n  for (;;) {\n    xc.iadd(this.curve.n);\n    if (xc.cmp(this.curve.p) >= 0)\n      return false;\n\n    rx.redIAdd(t);\n    if (this.x.cmp(rx) === 0)\n      return true;\n  }\n};\n\nJPoint.prototype.inspect = function inspect() {\n  if (this.isInfinity())\n    return '<EC JPoint Infinity>';\n  return '<EC JPoint x: ' + this.x.toString(16, 2) +\n      ' y: ' + this.y.toString(16, 2) +\n      ' z: ' + this.z.toString(16, 2) + '>';\n};\n\nJPoint.prototype.isInfinity = function isInfinity() {\n  // XXX This code assumes that zero is always zero in red\n  return this.z.cmpn(0) === 0;\n};\n\nvar curve_1 = createCommonjsModule(function (module, exports) {\n'use strict';\n\nvar curve = exports;\n\ncurve.base = base;\ncurve.short = short_1;\ncurve.mont = /*RicMoo:ethers:require(./mont)*/(null);\ncurve.edwards = /*RicMoo:ethers:require(./edwards)*/(null);\n});\n\nvar curves_1 = createCommonjsModule(function (module, exports) {\n'use strict';\n\nvar curves = exports;\n\n\n\n\n\nvar assert = utils_1$1.assert;\n\nfunction PresetCurve(options) {\n  if (options.type === 'short')\n    this.curve = new curve_1.short(options);\n  else if (options.type === 'edwards')\n    this.curve = new curve_1.edwards(options);\n  else\n    this.curve = new curve_1.mont(options);\n  this.g = this.curve.g;\n  this.n = this.curve.n;\n  this.hash = options.hash;\n\n  assert(this.g.validate(), 'Invalid curve');\n  assert(this.g.mul(this.n).isInfinity(), 'Invalid curve, G*N != O');\n}\ncurves.PresetCurve = PresetCurve;\n\nfunction defineCurve(name, options) {\n  Object.defineProperty(curves, name, {\n    configurable: true,\n    enumerable: true,\n    get: function() {\n      var curve = new PresetCurve(options);\n      Object.defineProperty(curves, name, {\n        configurable: true,\n        enumerable: true,\n        value: curve,\n      });\n      return curve;\n    },\n  });\n}\n\ndefineCurve('p192', {\n  type: 'short',\n  prime: 'p192',\n  p: 'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff',\n  a: 'ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc',\n  b: '64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1',\n  n: 'ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831',\n  hash: hash.sha256,\n  gRed: false,\n  g: [\n    '188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012',\n    '07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811',\n  ],\n});\n\ndefineCurve('p224', {\n  type: 'short',\n  prime: 'p224',\n  p: 'ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001',\n  a: 'ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe',\n  b: 'b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4',\n  n: 'ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d',\n  hash: hash.sha256,\n  gRed: false,\n  g: [\n    'b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21',\n    'bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34',\n  ],\n});\n\ndefineCurve('p256', {\n  type: 'short',\n  prime: null,\n  p: 'ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff',\n  a: 'ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc',\n  b: '5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b',\n  n: 'ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551',\n  hash: hash.sha256,\n  gRed: false,\n  g: [\n    '6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296',\n    '4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5',\n  ],\n});\n\ndefineCurve('p384', {\n  type: 'short',\n  prime: null,\n  p: 'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ' +\n     'fffffffe ffffffff 00000000 00000000 ffffffff',\n  a: 'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ' +\n     'fffffffe ffffffff 00000000 00000000 fffffffc',\n  b: 'b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f ' +\n     '5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef',\n  n: 'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 ' +\n     'f4372ddf 581a0db2 48b0a77a ecec196a ccc52973',\n  hash: hash.sha384,\n  gRed: false,\n  g: [\n    'aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 ' +\n    '5502f25d bf55296c 3a545e38 72760ab7',\n    '3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 ' +\n    '0a60b1ce 1d7e819d 7a431d7c 90ea0e5f',\n  ],\n});\n\ndefineCurve('p521', {\n  type: 'short',\n  prime: null,\n  p: '000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ' +\n     'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ' +\n     'ffffffff ffffffff ffffffff ffffffff ffffffff',\n  a: '000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ' +\n     'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ' +\n     'ffffffff ffffffff ffffffff ffffffff fffffffc',\n  b: '00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b ' +\n     '99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd ' +\n     '3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00',\n  n: '000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ' +\n     'ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 ' +\n     'f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409',\n  hash: hash.sha512,\n  gRed: false,\n  g: [\n    '000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 ' +\n    '053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 ' +\n    'a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66',\n    '00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 ' +\n    '579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 ' +\n    '3fad0761 353c7086 a272c240 88be9476 9fd16650',\n  ],\n});\n\ndefineCurve('curve25519', {\n  type: 'mont',\n  prime: 'p25519',\n  p: '7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed',\n  a: '76d06',\n  b: '1',\n  n: '1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed',\n  hash: hash.sha256,\n  gRed: false,\n  g: [\n    '9',\n  ],\n});\n\ndefineCurve('ed25519', {\n  type: 'edwards',\n  prime: 'p25519',\n  p: '7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed',\n  a: '-1',\n  c: '1',\n  // -121665 * (121666^(-1)) (mod P)\n  d: '52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3',\n  n: '1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed',\n  hash: hash.sha256,\n  gRed: false,\n  g: [\n    '216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a',\n\n    // 4/5\n    '6666666666666666666666666666666666666666666666666666666666666658',\n  ],\n});\n\nvar pre;\ntry {\n  pre = /*RicMoo:ethers:require(./precomputed/secp256k1)*/(null).crash();\n} catch (e) {\n  pre = undefined;\n}\n\ndefineCurve('secp256k1', {\n  type: 'short',\n  prime: 'k256',\n  p: 'ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f',\n  a: '0',\n  b: '7',\n  n: 'ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141',\n  h: '1',\n  hash: hash.sha256,\n\n  // Precomputed endomorphism\n  beta: '7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee',\n  lambda: '5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72',\n  basis: [\n    {\n      a: '3086d221a7d46bcde86c90e49284eb15',\n      b: '-e4437ed6010e88286f547fa90abfe4c3',\n    },\n    {\n      a: '114ca50f7a8e2f3f657c1108d9d44cfd8',\n      b: '3086d221a7d46bcde86c90e49284eb15',\n    },\n  ],\n\n  gRed: false,\n  g: [\n    '79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798',\n    '483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8',\n    pre,\n  ],\n});\n});\n\n'use strict';\n\n\n\n\n\nfunction HmacDRBG(options) {\n  if (!(this instanceof HmacDRBG))\n    return new HmacDRBG(options);\n  this.hash = options.hash;\n  this.predResist = !!options.predResist;\n\n  this.outLen = this.hash.outSize;\n  this.minEntropy = options.minEntropy || this.hash.hmacStrength;\n\n  this._reseed = null;\n  this.reseedInterval = null;\n  this.K = null;\n  this.V = null;\n\n  var entropy = utils_1.toArray(options.entropy, options.entropyEnc || 'hex');\n  var nonce = utils_1.toArray(options.nonce, options.nonceEnc || 'hex');\n  var pers = utils_1.toArray(options.pers, options.persEnc || 'hex');\n  minimalisticAssert(entropy.length >= (this.minEntropy / 8),\n         'Not enough entropy. Minimum is: ' + this.minEntropy + ' bits');\n  this._init(entropy, nonce, pers);\n}\nvar hmacDrbg = HmacDRBG;\n\nHmacDRBG.prototype._init = function init(entropy, nonce, pers) {\n  var seed = entropy.concat(nonce).concat(pers);\n\n  this.K = new Array(this.outLen / 8);\n  this.V = new Array(this.outLen / 8);\n  for (var i = 0; i < this.V.length; i++) {\n    this.K[i] = 0x00;\n    this.V[i] = 0x01;\n  }\n\n  this._update(seed);\n  this._reseed = 1;\n  this.reseedInterval = 0x1000000000000;  // 2^48\n};\n\nHmacDRBG.prototype._hmac = function hmac() {\n  return new hash.hmac(this.hash, this.K);\n};\n\nHmacDRBG.prototype._update = function update(seed) {\n  var kmac = this._hmac()\n                 .update(this.V)\n                 .update([ 0x00 ]);\n  if (seed)\n    kmac = kmac.update(seed);\n  this.K = kmac.digest();\n  this.V = this._hmac().update(this.V).digest();\n  if (!seed)\n    return;\n\n  this.K = this._hmac()\n               .update(this.V)\n               .update([ 0x01 ])\n               .update(seed)\n               .digest();\n  this.V = this._hmac().update(this.V).digest();\n};\n\nHmacDRBG.prototype.reseed = function reseed(entropy, entropyEnc, add, addEnc) {\n  // Optional entropy enc\n  if (typeof entropyEnc !== 'string') {\n    addEnc = add;\n    add = entropyEnc;\n    entropyEnc = null;\n  }\n\n  entropy = utils_1.toArray(entropy, entropyEnc);\n  add = utils_1.toArray(add, addEnc);\n\n  minimalisticAssert(entropy.length >= (this.minEntropy / 8),\n         'Not enough entropy. Minimum is: ' + this.minEntropy + ' bits');\n\n  this._update(entropy.concat(add || []));\n  this._reseed = 1;\n};\n\nHmacDRBG.prototype.generate = function generate(len, enc, add, addEnc) {\n  if (this._reseed > this.reseedInterval)\n    throw new Error('Reseed is required');\n\n  // Optional encoding\n  if (typeof enc !== 'string') {\n    addEnc = add;\n    add = enc;\n    enc = null;\n  }\n\n  // Optional additional data\n  if (add) {\n    add = utils_1.toArray(add, addEnc || 'hex');\n    this._update(add);\n  }\n\n  var temp = [];\n  while (temp.length < len) {\n    this.V = this._hmac().update(this.V).digest();\n    temp = temp.concat(this.V);\n  }\n\n  var res = temp.slice(0, len);\n  this._update(add);\n  this._reseed++;\n  return utils_1.encode(res, enc);\n};\n\n'use strict';\n\n\n\nvar assert$3 = utils_1$1.assert;\n\nfunction KeyPair(ec, options) {\n  this.ec = ec;\n  this.priv = null;\n  this.pub = null;\n\n  // KeyPair(ec, { priv: ..., pub: ... })\n  if (options.priv)\n    this._importPrivate(options.priv, options.privEnc);\n  if (options.pub)\n    this._importPublic(options.pub, options.pubEnc);\n}\nvar key = KeyPair;\n\nKeyPair.fromPublic = function fromPublic(ec, pub, enc) {\n  if (pub instanceof KeyPair)\n    return pub;\n\n  return new KeyPair(ec, {\n    pub: pub,\n    pubEnc: enc,\n  });\n};\n\nKeyPair.fromPrivate = function fromPrivate(ec, priv, enc) {\n  if (priv instanceof KeyPair)\n    return priv;\n\n  return new KeyPair(ec, {\n    priv: priv,\n    privEnc: enc,\n  });\n};\n\nKeyPair.prototype.validate = function validate() {\n  var pub = this.getPublic();\n\n  if (pub.isInfinity())\n    return { result: false, reason: 'Invalid public key' };\n  if (!pub.validate())\n    return { result: false, reason: 'Public key is not a point' };\n  if (!pub.mul(this.ec.curve.n).isInfinity())\n    return { result: false, reason: 'Public key * N != O' };\n\n  return { result: true, reason: null };\n};\n\nKeyPair.prototype.getPublic = function getPublic(compact, enc) {\n  // compact is optional argument\n  if (typeof compact === 'string') {\n    enc = compact;\n    compact = null;\n  }\n\n  if (!this.pub)\n    this.pub = this.ec.g.mul(this.priv);\n\n  if (!enc)\n    return this.pub;\n\n  return this.pub.encode(enc, compact);\n};\n\nKeyPair.prototype.getPrivate = function getPrivate(enc) {\n  if (enc === 'hex')\n    return this.priv.toString(16, 2);\n  else\n    return this.priv;\n};\n\nKeyPair.prototype._importPrivate = function _importPrivate(key, enc) {\n  this.priv = new BN(key, enc || 16);\n\n  // Ensure that the priv won't be bigger than n, otherwise we may fail\n  // in fixed multiplication method\n  this.priv = this.priv.umod(this.ec.curve.n);\n};\n\nKeyPair.prototype._importPublic = function _importPublic(key, enc) {\n  if (key.x || key.y) {\n    // Montgomery points only have an `x` coordinate.\n    // Weierstrass/Edwards points on the other hand have both `x` and\n    // `y` coordinates.\n    if (this.ec.curve.type === 'mont') {\n      assert$3(key.x, 'Need x coordinate');\n    } else if (this.ec.curve.type === 'short' ||\n               this.ec.curve.type === 'edwards') {\n      assert$3(key.x && key.y, 'Need both x and y coordinate');\n    }\n    this.pub = this.ec.curve.point(key.x, key.y);\n    return;\n  }\n  this.pub = this.ec.curve.decodePoint(key, enc);\n};\n\n// ECDH\nKeyPair.prototype.derive = function derive(pub) {\n  if(!pub.validate()) {\n    assert$3(pub.validate(), 'public point not validated');\n  }\n  return pub.mul(this.priv).getX();\n};\n\n// ECDSA\nKeyPair.prototype.sign = function sign(msg, enc, options) {\n  return this.ec.sign(msg, this, enc, options);\n};\n\nKeyPair.prototype.verify = function verify(msg, signature) {\n  return this.ec.verify(msg, signature, this);\n};\n\nKeyPair.prototype.inspect = function inspect() {\n  return '<Key priv: ' + (this.priv && this.priv.toString(16, 2)) +\n         ' pub: ' + (this.pub && this.pub.inspect()) + ' >';\n};\n\n'use strict';\n\n\n\n\nvar assert$4 = utils_1$1.assert;\n\nfunction Signature(options, enc) {\n  if (options instanceof Signature)\n    return options;\n\n  if (this._importDER(options, enc))\n    return;\n\n  assert$4(options.r && options.s, 'Signature without r or s');\n  this.r = new BN(options.r, 16);\n  this.s = new BN(options.s, 16);\n  if (options.recoveryParam === undefined)\n    this.recoveryParam = null;\n  else\n    this.recoveryParam = options.recoveryParam;\n}\nvar signature = Signature;\n\nfunction Position() {\n  this.place = 0;\n}\n\nfunction getLength(buf, p) {\n  var initial = buf[p.place++];\n  if (!(initial & 0x80)) {\n    return initial;\n  }\n  var octetLen = initial & 0xf;\n\n  // Indefinite length or overflow\n  if (octetLen === 0 || octetLen > 4) {\n    return false;\n  }\n\n  var val = 0;\n  for (var i = 0, off = p.place; i < octetLen; i++, off++) {\n    val <<= 8;\n    val |= buf[off];\n    val >>>= 0;\n  }\n\n  // Leading zeroes\n  if (val <= 0x7f) {\n    return false;\n  }\n\n  p.place = off;\n  return val;\n}\n\nfunction rmPadding(buf) {\n  var i = 0;\n  var len = buf.length - 1;\n  while (!buf[i] && !(buf[i + 1] & 0x80) && i < len) {\n    i++;\n  }\n  if (i === 0) {\n    return buf;\n  }\n  return buf.slice(i);\n}\n\nSignature.prototype._importDER = function _importDER(data, enc) {\n  data = utils_1$1.toArray(data, enc);\n  var p = new Position();\n  if (data[p.place++] !== 0x30) {\n    return false;\n  }\n  var len = getLength(data, p);\n  if (len === false) {\n    return false;\n  }\n  if ((len + p.place) !== data.length) {\n    return false;\n  }\n  if (data[p.place++] !== 0x02) {\n    return false;\n  }\n  var rlen = getLength(data, p);\n  if (rlen === false) {\n    return false;\n  }\n  var r = data.slice(p.place, rlen + p.place);\n  p.place += rlen;\n  if (data[p.place++] !== 0x02) {\n    return false;\n  }\n  var slen = getLength(data, p);\n  if (slen === false) {\n    return false;\n  }\n  if (data.length !== slen + p.place) {\n    return false;\n  }\n  var s = data.slice(p.place, slen + p.place);\n  if (r[0] === 0) {\n    if (r[1] & 0x80) {\n      r = r.slice(1);\n    } else {\n      // Leading zeroes\n      return false;\n    }\n  }\n  if (s[0] === 0) {\n    if (s[1] & 0x80) {\n      s = s.slice(1);\n    } else {\n      // Leading zeroes\n      return false;\n    }\n  }\n\n  this.r = new BN(r);\n  this.s = new BN(s);\n  this.recoveryParam = null;\n\n  return true;\n};\n\nfunction constructLength(arr, len) {\n  if (len < 0x80) {\n    arr.push(len);\n    return;\n  }\n  var octets = 1 + (Math.log(len) / Math.LN2 >>> 3);\n  arr.push(octets | 0x80);\n  while (--octets) {\n    arr.push((len >>> (octets << 3)) & 0xff);\n  }\n  arr.push(len);\n}\n\nSignature.prototype.toDER = function toDER(enc) {\n  var r = this.r.toArray();\n  var s = this.s.toArray();\n\n  // Pad values\n  if (r[0] & 0x80)\n    r = [ 0 ].concat(r);\n  // Pad values\n  if (s[0] & 0x80)\n    s = [ 0 ].concat(s);\n\n  r = rmPadding(r);\n  s = rmPadding(s);\n\n  while (!s[0] && !(s[1] & 0x80)) {\n    s = s.slice(1);\n  }\n  var arr = [ 0x02 ];\n  constructLength(arr, r.length);\n  arr = arr.concat(r);\n  arr.push(0x02);\n  constructLength(arr, s.length);\n  var backHalf = arr.concat(s);\n  var res = [ 0x30 ];\n  constructLength(res, backHalf.length);\n  res = res.concat(backHalf);\n  return utils_1$1.encode(res, enc);\n};\n\n'use strict';\n\n\n\n\n\nvar rand = /*RicMoo:ethers:require(brorand)*/(function() { throw new Error('unsupported'); });\nvar assert$5 = utils_1$1.assert;\n\n\n\n\nfunction EC(options) {\n  if (!(this instanceof EC))\n    return new EC(options);\n\n  // Shortcut `elliptic.ec(curve-name)`\n  if (typeof options === 'string') {\n    assert$5(Object.prototype.hasOwnProperty.call(curves_1, options),\n      'Unknown curve ' + options);\n\n    options = curves_1[options];\n  }\n\n  // Shortcut for `elliptic.ec(elliptic.curves.curveName)`\n  if (options instanceof curves_1.PresetCurve)\n    options = { curve: options };\n\n  this.curve = options.curve.curve;\n  this.n = this.curve.n;\n  this.nh = this.n.ushrn(1);\n  this.g = this.curve.g;\n\n  // Point on curve\n  this.g = options.curve.g;\n  this.g.precompute(options.curve.n.bitLength() + 1);\n\n  // Hash for function for DRBG\n  this.hash = options.hash || options.curve.hash;\n}\nvar ec = EC;\n\nEC.prototype.keyPair = function keyPair(options) {\n  return new key(this, options);\n};\n\nEC.prototype.keyFromPrivate = function keyFromPrivate(priv, enc) {\n  return key.fromPrivate(this, priv, enc);\n};\n\nEC.prototype.keyFromPublic = function keyFromPublic(pub, enc) {\n  return key.fromPublic(this, pub, enc);\n};\n\nEC.prototype.genKeyPair = function genKeyPair(options) {\n  if (!options)\n    options = {};\n\n  // Instantiate Hmac_DRBG\n  var drbg = new hmacDrbg({\n    hash: this.hash,\n    pers: options.pers,\n    persEnc: options.persEnc || 'utf8',\n    entropy: options.entropy || rand(this.hash.hmacStrength),\n    entropyEnc: options.entropy && options.entropyEnc || 'utf8',\n    nonce: this.n.toArray(),\n  });\n\n  var bytes = this.n.byteLength();\n  var ns2 = this.n.sub(new BN(2));\n  for (;;) {\n    var priv = new BN(drbg.generate(bytes));\n    if (priv.cmp(ns2) > 0)\n      continue;\n\n    priv.iaddn(1);\n    return this.keyFromPrivate(priv);\n  }\n};\n\nEC.prototype._truncateToN = function _truncateToN(msg, truncOnly) {\n  var delta = msg.byteLength() * 8 - this.n.bitLength();\n  if (delta > 0)\n    msg = msg.ushrn(delta);\n  if (!truncOnly && msg.cmp(this.n) >= 0)\n    return msg.sub(this.n);\n  else\n    return msg;\n};\n\nEC.prototype.sign = function sign(msg, key, enc, options) {\n  if (typeof enc === 'object') {\n    options = enc;\n    enc = null;\n  }\n  if (!options)\n    options = {};\n\n  key = this.keyFromPrivate(key, enc);\n  msg = this._truncateToN(new BN(msg, 16));\n\n  // Zero-extend key to provide enough entropy\n  var bytes = this.n.byteLength();\n  var bkey = key.getPrivate().toArray('be', bytes);\n\n  // Zero-extend nonce to have the same byte size as N\n  var nonce = msg.toArray('be', bytes);\n\n  // Instantiate Hmac_DRBG\n  var drbg = new hmacDrbg({\n    hash: this.hash,\n    entropy: bkey,\n    nonce: nonce,\n    pers: options.pers,\n    persEnc: options.persEnc || 'utf8',\n  });\n\n  // Number of bytes to generate\n  var ns1 = this.n.sub(new BN(1));\n\n  for (var iter = 0; ; iter++) {\n    var k = options.k ?\n      options.k(iter) :\n      new BN(drbg.generate(this.n.byteLength()));\n    k = this._truncateToN(k, true);\n    if (k.cmpn(1) <= 0 || k.cmp(ns1) >= 0)\n      continue;\n\n    var kp = this.g.mul(k);\n    if (kp.isInfinity())\n      continue;\n\n    var kpX = kp.getX();\n    var r = kpX.umod(this.n);\n    if (r.cmpn(0) === 0)\n      continue;\n\n    var s = k.invm(this.n).mul(r.mul(key.getPrivate()).iadd(msg));\n    s = s.umod(this.n);\n    if (s.cmpn(0) === 0)\n      continue;\n\n    var recoveryParam = (kp.getY().isOdd() ? 1 : 0) |\n                        (kpX.cmp(r) !== 0 ? 2 : 0);\n\n    // Use complement of `s`, if it is > `n / 2`\n    if (options.canonical && s.cmp(this.nh) > 0) {\n      s = this.n.sub(s);\n      recoveryParam ^= 1;\n    }\n\n    return new signature({ r: r, s: s, recoveryParam: recoveryParam });\n  }\n};\n\nEC.prototype.verify = function verify(msg, signature$1, key, enc) {\n  msg = this._truncateToN(new BN(msg, 16));\n  key = this.keyFromPublic(key, enc);\n  signature$1 = new signature(signature$1, 'hex');\n\n  // Perform primitive values validation\n  var r = signature$1.r;\n  var s = signature$1.s;\n  if (r.cmpn(1) < 0 || r.cmp(this.n) >= 0)\n    return false;\n  if (s.cmpn(1) < 0 || s.cmp(this.n) >= 0)\n    return false;\n\n  // Validate signature\n  var sinv = s.invm(this.n);\n  var u1 = sinv.mul(msg).umod(this.n);\n  var u2 = sinv.mul(r).umod(this.n);\n  var p;\n\n  if (!this.curve._maxwellTrick) {\n    p = this.g.mulAdd(u1, key.getPublic(), u2);\n    if (p.isInfinity())\n      return false;\n\n    return p.getX().umod(this.n).cmp(r) === 0;\n  }\n\n  // NOTE: Greg Maxwell's trick, inspired by:\n  // https://git.io/vad3K\n\n  p = this.g.jmulAdd(u1, key.getPublic(), u2);\n  if (p.isInfinity())\n    return false;\n\n  // Compare `p.x` of Jacobian point with `r`,\n  // this will do `p.x == r * p.z^2` instead of multiplying `p.x` by the\n  // inverse of `p.z^2`\n  return p.eqXToP(r);\n};\n\nEC.prototype.recoverPubKey = function(msg, signature$1, j, enc) {\n  assert$5((3 & j) === j, 'The recovery param is more than two bits');\n  signature$1 = new signature(signature$1, enc);\n\n  var n = this.n;\n  var e = new BN(msg);\n  var r = signature$1.r;\n  var s = signature$1.s;\n\n  // A set LSB signifies that the y-coordinate is odd\n  var isYOdd = j & 1;\n  var isSecondKey = j >> 1;\n  if (r.cmp(this.curve.p.umod(this.curve.n)) >= 0 && isSecondKey)\n    throw new Error('Unable to find sencond key candinate');\n\n  // 1.1. Let x = r + jn.\n  if (isSecondKey)\n    r = this.curve.pointFromX(r.add(this.curve.n), isYOdd);\n  else\n    r = this.curve.pointFromX(r, isYOdd);\n\n  var rInv = signature$1.r.invm(n);\n  var s1 = n.sub(e).mul(rInv).umod(n);\n  var s2 = s.mul(rInv).umod(n);\n\n  // 1.6.1 Compute Q = r^-1 (sR -  eG)\n  //               Q = r^-1 (sR + -eG)\n  return this.g.mulAdd(s1, r, s2);\n};\n\nEC.prototype.getKeyRecoveryParam = function(e, signature$1, Q, enc) {\n  signature$1 = new signature(signature$1, enc);\n  if (signature$1.recoveryParam !== null)\n    return signature$1.recoveryParam;\n\n  for (var i = 0; i < 4; i++) {\n    var Qprime;\n    try {\n      Qprime = this.recoverPubKey(e, signature$1, i);\n    } catch (e) {\n      continue;\n    }\n\n    if (Qprime.eq(Q))\n      return i;\n  }\n  throw new Error('Unable to find valid recovery factor');\n};\n\nvar elliptic_1 = createCommonjsModule(function (module, exports) {\n'use strict';\n\nvar elliptic = exports;\n\nelliptic.version = /*RicMoo:ethers*/{ version: \"6.5.4\" }.version;\nelliptic.utils = utils_1$1;\nelliptic.rand = /*RicMoo:ethers:require(brorand)*/(function() { throw new Error('unsupported'); });\nelliptic.curve = curve_1;\nelliptic.curves = curves_1;\n\n// Protocols\nelliptic.ec = ec;\nelliptic.eddsa = /*RicMoo:ethers:require(./elliptic/eddsa)*/(null);\n});\n\nvar EC$1 = elliptic_1.ec;\n\nexport { EC$1 as EC };\n//# sourceMappingURL=browser-elliptic.js.map\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}