{"ast":null,"code":"\"use strict\";\n\nimport _classCallCheck from \"D:/temki/grimace/GrimaceSwap/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"D:/temki/grimace/GrimaceSwap/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _inherits from \"D:/temki/grimace/GrimaceSwap/node_modules/@babel/runtime/helpers/esm/inherits.js\";\nimport _createSuper from \"D:/temki/grimace/GrimaceSwap/node_modules/@babel/runtime/helpers/esm/createSuper.js\";\nimport aes from \"aes-js\";\nimport { getAddress } from \"@ethersproject/address\";\nimport { arrayify } from \"@ethersproject/bytes\";\nimport { keccak256 } from \"@ethersproject/keccak256\";\nimport { pbkdf2 } from \"@ethersproject/pbkdf2\";\nimport { toUtf8Bytes } from \"@ethersproject/strings\";\nimport { Description } from \"@ethersproject/properties\";\nimport { Logger } from \"@ethersproject/logger\";\nimport { version } from \"./_version\";\nvar logger = new Logger(version);\nimport { getPassword, looseArrayify, searchPath } from \"./utils\";\nexport var CrowdsaleAccount = /*#__PURE__*/function (_Description) {\n  _inherits(CrowdsaleAccount, _Description);\n  var _super = _createSuper(CrowdsaleAccount);\n  function CrowdsaleAccount() {\n    _classCallCheck(this, CrowdsaleAccount);\n    return _super.apply(this, arguments);\n  }\n  _createClass(CrowdsaleAccount, [{\n    key: \"isCrowdsaleAccount\",\n    value: function isCrowdsaleAccount(value) {\n      return !!(value && value._isCrowdsaleAccount);\n    }\n  }]);\n  return CrowdsaleAccount;\n}(Description);\n// See: https://github.com/ethereum/pyethsaletool\nexport function decrypt(json, password) {\n  var data = JSON.parse(json);\n  password = getPassword(password);\n  // Ethereum Address\n  var ethaddr = getAddress(searchPath(data, \"ethaddr\"));\n  // Encrypted Seed\n  var encseed = looseArrayify(searchPath(data, \"encseed\"));\n  if (!encseed || encseed.length % 16 !== 0) {\n    logger.throwArgumentError(\"invalid encseed\", \"json\", json);\n  }\n  var key = arrayify(pbkdf2(password, password, 2000, 32, \"sha256\")).slice(0, 16);\n  var iv = encseed.slice(0, 16);\n  var encryptedSeed = encseed.slice(16);\n  // Decrypt the seed\n  var aesCbc = new aes.ModeOfOperation.cbc(key, iv);\n  var seed = aes.padding.pkcs7.strip(arrayify(aesCbc.decrypt(encryptedSeed)));\n  // This wallet format is weird... Convert the binary encoded hex to a string.\n  var seedHex = \"\";\n  for (var i = 0; i < seed.length; i++) {\n    seedHex += String.fromCharCode(seed[i]);\n  }\n  var seedHexBytes = toUtf8Bytes(seedHex);\n  var privateKey = keccak256(seedHexBytes);\n  return new CrowdsaleAccount({\n    _isCrowdsaleAccount: true,\n    address: ethaddr,\n    privateKey: privateKey\n  });\n}","map":{"version":3,"names":["_classCallCheck","_createClass","_inherits","_createSuper","aes","getAddress","arrayify","keccak256","pbkdf2","toUtf8Bytes","Description","Logger","version","logger","getPassword","looseArrayify","searchPath","CrowdsaleAccount","_Description","_super","apply","arguments","key","value","isCrowdsaleAccount","_isCrowdsaleAccount","decrypt","json","password","data","JSON","parse","ethaddr","encseed","length","throwArgumentError","slice","iv","encryptedSeed","aesCbc","ModeOfOperation","cbc","seed","padding","pkcs7","strip","seedHex","i","String","fromCharCode","seedHexBytes","privateKey","address"],"sources":["D:\\temki\\grimace\\GrimaceSwap\\node_modules\\@ethersproject\\json-wallets\\src.ts\\crowdsale.ts"],"sourcesContent":["\"use strict\";\n\nimport aes from \"aes-js\";\n\nimport { ExternallyOwnedAccount } from \"@ethersproject/abstract-signer\";\nimport { getAddress } from \"@ethersproject/address\";\nimport { arrayify, Bytes } from \"@ethersproject/bytes\";\nimport { keccak256 } from \"@ethersproject/keccak256\";\nimport { pbkdf2 } from \"@ethersproject/pbkdf2\";\nimport { toUtf8Bytes } from \"@ethersproject/strings\";\nimport { Description } from \"@ethersproject/properties\";\n\nimport { Logger } from \"@ethersproject/logger\";\nimport { version } from \"./_version\";\nconst logger = new Logger(version);\n\nimport { getPassword, looseArrayify, searchPath } from \"./utils\";\n\nexport interface _CrowdsaleAccount {\n    address: string;\n    privateKey: string;\n\n    _isCrowdsaleAccount: boolean;\n}\n\nexport class CrowdsaleAccount extends Description<_CrowdsaleAccount> implements ExternallyOwnedAccount {\n    readonly address: string;\n    readonly privateKey: string;\n    readonly mnemonic?: string;\n    readonly path?: string;\n\n    readonly _isCrowdsaleAccount: boolean;\n\n    isCrowdsaleAccount(value: any): value is CrowdsaleAccount {\n        return !!(value && value._isCrowdsaleAccount);\n    }\n}\n\n// See: https://github.com/ethereum/pyethsaletool\nexport function decrypt(json: string, password: Bytes | string): ExternallyOwnedAccount {\n    const data = JSON.parse(json);\n\n    password = getPassword(password);\n\n    // Ethereum Address\n    const ethaddr = getAddress(searchPath(data, \"ethaddr\"));\n\n    // Encrypted Seed\n    const encseed = looseArrayify(searchPath(data, \"encseed\"));\n    if (!encseed || (encseed.length % 16) !== 0) {\n        logger.throwArgumentError(\"invalid encseed\", \"json\", json);\n    }\n\n    const key = arrayify(pbkdf2(password, password, 2000, 32, \"sha256\")).slice(0, 16);\n\n    const iv = encseed.slice(0, 16);\n    const encryptedSeed = encseed.slice(16);\n\n    // Decrypt the seed\n    const aesCbc = new aes.ModeOfOperation.cbc(key, iv);\n    const seed = aes.padding.pkcs7.strip(arrayify(aesCbc.decrypt(encryptedSeed)));\n\n    // This wallet format is weird... Convert the binary encoded hex to a string.\n    let seedHex = \"\";\n    for (let i = 0; i < seed.length; i++) {\n        seedHex += String.fromCharCode(seed[i]);\n    }\n\n    const seedHexBytes = toUtf8Bytes(seedHex);\n\n    const privateKey = keccak256(seedHexBytes);\n\n    return new CrowdsaleAccount ({\n        _isCrowdsaleAccount: true,\n        address: ethaddr,\n        privateKey: privateKey\n    });\n}\n\n"],"mappings":"AAAA,YAAY;;AAAC,OAAAA,eAAA;AAAA,OAAAC,YAAA;AAAA,OAAAC,SAAA;AAAA,OAAAC,YAAA;AAEb,OAAOC,GAAG,MAAM,QAAQ;AAGxB,SAASC,UAAU,QAAQ,wBAAwB;AACnD,SAASC,QAAQ,QAAe,sBAAsB;AACtD,SAASC,SAAS,QAAQ,0BAA0B;AACpD,SAASC,MAAM,QAAQ,uBAAuB;AAC9C,SAASC,WAAW,QAAQ,wBAAwB;AACpD,SAASC,WAAW,QAAQ,2BAA2B;AAEvD,SAASC,MAAM,QAAQ,uBAAuB;AAC9C,SAASC,OAAO,QAAQ,YAAY;AACpC,IAAMC,MAAM,GAAG,IAAIF,MAAM,CAACC,OAAO,CAAC;AAElC,SAASE,WAAW,EAAEC,aAAa,EAAEC,UAAU,QAAQ,SAAS;AAShE,WAAaC,gBAAiB,0BAAAC,YAAA;EAAAhB,SAAA,CAAAe,gBAAA,EAAAC,YAAA;EAAA,IAAAC,MAAA,GAAAhB,YAAA,CAAAc,gBAAA;EAAA,SAAAA,iBAAA;IAAAjB,eAAA,OAAAiB,gBAAA;IAAA,OAAAE,MAAA,CAAAC,KAAA,OAAAC,SAAA;EAAA;EAAApB,YAAA,CAAAgB,gBAAA;IAAAK,GAAA;IAAAC,KAAA,EAQ1B,SAAAC,mBAAmBD,KAAU;MACzB,OAAO,CAAC,EAAEA,KAAK,IAAIA,KAAK,CAACE,mBAAmB,CAAC;IACjD;EAAC;EAAA,OAAAR,gBAAA;AAAA,EAViCP,WAA8B;AAapE;AACA,OAAM,SAAUgB,OAAOA,CAACC,IAAY,EAAEC,QAAwB;EAC1D,IAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACJ,IAAI,CAAC;EAE7BC,QAAQ,GAAGd,WAAW,CAACc,QAAQ,CAAC;EAEhC;EACA,IAAMI,OAAO,GAAG3B,UAAU,CAACW,UAAU,CAACa,IAAI,EAAE,SAAS,CAAC,CAAC;EAEvD;EACA,IAAMI,OAAO,GAAGlB,aAAa,CAACC,UAAU,CAACa,IAAI,EAAE,SAAS,CAAC,CAAC;EAC1D,IAAI,CAACI,OAAO,IAAKA,OAAO,CAACC,MAAM,GAAG,EAAE,KAAM,CAAC,EAAE;IACzCrB,MAAM,CAACsB,kBAAkB,CAAC,iBAAiB,EAAE,MAAM,EAAER,IAAI,CAAC;;EAG9D,IAAML,GAAG,GAAGhB,QAAQ,CAACE,MAAM,CAACoB,QAAQ,EAAEA,QAAQ,EAAE,IAAI,EAAE,EAAE,EAAE,QAAQ,CAAC,CAAC,CAACQ,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC;EAEjF,IAAMC,EAAE,GAAGJ,OAAO,CAACG,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC;EAC/B,IAAME,aAAa,GAAGL,OAAO,CAACG,KAAK,CAAC,EAAE,CAAC;EAEvC;EACA,IAAMG,MAAM,GAAG,IAAInC,GAAG,CAACoC,eAAe,CAACC,GAAG,CAACnB,GAAG,EAAEe,EAAE,CAAC;EACnD,IAAMK,IAAI,GAAGtC,GAAG,CAACuC,OAAO,CAACC,KAAK,CAACC,KAAK,CAACvC,QAAQ,CAACiC,MAAM,CAACb,OAAO,CAACY,aAAa,CAAC,CAAC,CAAC;EAE7E;EACA,IAAIQ,OAAO,GAAG,EAAE;EAChB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGL,IAAI,CAACR,MAAM,EAAEa,CAAC,EAAE,EAAE;IAClCD,OAAO,IAAIE,MAAM,CAACC,YAAY,CAACP,IAAI,CAACK,CAAC,CAAC,CAAC;;EAG3C,IAAMG,YAAY,GAAGzC,WAAW,CAACqC,OAAO,CAAC;EAEzC,IAAMK,UAAU,GAAG5C,SAAS,CAAC2C,YAAY,CAAC;EAE1C,OAAO,IAAIjC,gBAAgB,CAAE;IACzBQ,mBAAmB,EAAE,IAAI;IACzB2B,OAAO,EAAEpB,OAAO;IAChBmB,UAAU,EAAEA;GACf,CAAC;AACN"},"metadata":{},"sourceType":"module","externalDependencies":[]}